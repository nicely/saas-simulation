(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _n(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const se={},Qt=[],Je=()=>{},Ta=()=>!1,hr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),yn=t=>t.startsWith("onUpdate:"),_e=Object.assign,bn=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},ka=Object.prototype.hasOwnProperty,X=(t,e)=>ka.call(t,e),D=Array.isArray,Xt=t=>Ms(t)==="[object Map]",fr=t=>Ms(t)==="[object Set]",Gn=t=>Ms(t)==="[object Date]",H=t=>typeof t=="function",ue=t=>typeof t=="string",st=t=>typeof t=="symbol",ae=t=>t!==null&&typeof t=="object",Di=t=>(ae(t)||H(t))&&H(t.then)&&H(t.catch),Ui=Object.prototype.toString,Ms=t=>Ui.call(t),xa=t=>Ms(t).slice(8,-1),Ni=t=>Ms(t)==="[object Object]",wn=t=>ue(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,bs=_n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Ea=/-(\w)/g,Rt=pr(t=>t.replace(Ea,(e,s)=>s?s.toUpperCase():"")),Ra=/\B([A-Z])/g,Bt=pr(t=>t.replace(Ra,"-$1").toLowerCase()),Vi=pr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ir=pr(t=>t?`on${Vi(t)}`:""),Et=(t,e)=>!Object.is(t,e),Qs=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Bi=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},sr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let qn;const gr=()=>qn||(qn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sn(t){if(D(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=ue(r)?Aa(r):Sn(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(ue(t)||ae(t))return t}const Pa=/;(?![^(]*\))/g,Ca=/:([^]+)/,Oa=/\/\*[^]*?\*\//g;function Aa(t){const e={};return t.replace(Oa,"").split(Pa).forEach(s=>{if(s){const r=s.split(Ca);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function et(t){let e="";if(ue(t))e=t;else if(D(t))for(let s=0;s<t.length;s++){const r=et(t[s]);r&&(e+=r+" ")}else if(ae(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ja="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$a=_n(ja);function Hi(t){return!!t||t===""}function Ia(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=vr(t[r],e[r]);return s}function vr(t,e){if(t===e)return!0;let s=Gn(t),r=Gn(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=st(t),r=st(e),s||r)return t===e;if(s=D(t),r=D(e),s||r)return s&&r?Ia(t,e):!1;if(s=ae(t),r=ae(e),s||r){if(!s||!r)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!vr(t[o],e[o]))return!1}}return String(t)===String(e)}function Ma(t,e){return t.findIndex(s=>vr(s,e))}const Gi=t=>!!(t&&t.__v_isRef===!0),V=t=>ue(t)?t:t==null?"":D(t)||ae(t)&&(t.toString===Ui||!H(t.toString))?Gi(t)?V(t.value):JSON.stringify(t,qi,2):String(t),qi=(t,e)=>Gi(e)?qi(t,e.value):Xt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[Mr(r,i)+" =>"]=n,s),{})}:fr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Mr(s))}:st(e)?Mr(e):ae(e)&&!D(e)&&!Ni(e)?String(e):e,Mr=(t,e="")=>{var s;return st(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fe;class Fa{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fe,!e&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Fe;try{return Fe=this,e()}finally{Fe=s}}}on(){Fe=this}off(){Fe=this.parent}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function La(){return Fe}let ie;const Fr=new WeakSet;class Ki{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fe&&Fe.active&&Fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fr.has(this)&&(Fr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kn(this),zi(this);const e=ie,s=We;ie=this,We=!0;try{return this.fn()}finally{Yi(this),ie=e,We=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)xn(e);this.deps=this.depsTail=void 0,Kn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xr(this)&&this.run()}get dirty(){return Xr(this)}}let Ji=0,ws,Ss;function Wi(t,e=!1){if(t.flags|=8,e){t.next=Ss,Ss=t;return}t.next=ws,ws=t}function Tn(){Ji++}function kn(){if(--Ji>0)return;if(Ss){let e=Ss;for(Ss=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;ws;){let e=ws;for(ws=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function zi(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Yi(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),xn(r),Da(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Xr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qi(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Qi(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Cs))return;t.globalVersion=Cs;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Xr(t)){t.flags&=-3;return}const s=ie,r=We;ie=t,We=!0;try{zi(t);const n=t.fn(t._value);(e.version===0||Et(n,t._value))&&(t._value=n,e.version++)}catch(n){throw e.version++,n}finally{ie=s,We=r,Yi(t),t.flags&=-3}}function xn(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)xn(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Da(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let We=!0;const Xi=[];function Pt(){Xi.push(We),We=!1}function Ct(){const t=Xi.pop();We=t===void 0?!0:t}function Kn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=ie;ie=void 0;try{e()}finally{ie=s}}}let Cs=0;class Ua{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class En{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ie||!We||ie===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ie)s=this.activeLink=new Ua(ie,this),ie.deps?(s.prevDep=ie.depsTail,ie.depsTail.nextDep=s,ie.depsTail=s):ie.deps=ie.depsTail=s,Zi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=ie.depsTail,s.nextDep=void 0,ie.depsTail.nextDep=s,ie.depsTail=s,ie.deps===s&&(ie.deps=r)}return s}trigger(e){this.version++,Cs++,this.notify(e)}notify(e){Tn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{kn()}}}function Zi(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Zi(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Zr=new WeakMap,Ut=Symbol(""),en=Symbol(""),Os=Symbol("");function be(t,e,s){if(We&&ie){let r=Zr.get(t);r||Zr.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new En),n.map=r,n.key=s),n.track()}}function ut(t,e,s,r,n,i){const o=Zr.get(t);if(!o){Cs++;return}const a=l=>{l&&l.trigger()};if(Tn(),e==="clear")o.forEach(a);else{const l=D(t),c=l&&wn(s);if(l&&s==="length"){const u=Number(r);o.forEach((f,m)=>{(m==="length"||m===Os||!st(m)&&m>=u)&&a(f)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(Os)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ut)),Xt(t)&&a(o.get(en)));break;case"delete":l||(a(o.get(Ut)),Xt(t)&&a(o.get(en)));break;case"set":Xt(t)&&a(o.get(Ut));break}}kn()}function qt(t){const e=Q(t);return e===t?e:(be(e,"iterate",Os),He(t)?e:e.map(we))}function mr(t){return be(t=Q(t),"iterate",Os),t}const Na={__proto__:null,[Symbol.iterator](){return Lr(this,Symbol.iterator,we)},concat(...t){return qt(this).concat(...t.map(e=>D(e)?qt(e):e))},entries(){return Lr(this,"entries",t=>(t[1]=we(t[1]),t))},every(t,e){return ot(this,"every",t,e,void 0,arguments)},filter(t,e){return ot(this,"filter",t,e,s=>s.map(we),arguments)},find(t,e){return ot(this,"find",t,e,we,arguments)},findIndex(t,e){return ot(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ot(this,"findLast",t,e,we,arguments)},findLastIndex(t,e){return ot(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ot(this,"forEach",t,e,void 0,arguments)},includes(...t){return Dr(this,"includes",t)},indexOf(...t){return Dr(this,"indexOf",t)},join(t){return qt(this).join(t)},lastIndexOf(...t){return Dr(this,"lastIndexOf",t)},map(t,e){return ot(this,"map",t,e,void 0,arguments)},pop(){return ps(this,"pop")},push(...t){return ps(this,"push",t)},reduce(t,...e){return Jn(this,"reduce",t,e)},reduceRight(t,...e){return Jn(this,"reduceRight",t,e)},shift(){return ps(this,"shift")},some(t,e){return ot(this,"some",t,e,void 0,arguments)},splice(...t){return ps(this,"splice",t)},toReversed(){return qt(this).toReversed()},toSorted(t){return qt(this).toSorted(t)},toSpliced(...t){return qt(this).toSpliced(...t)},unshift(...t){return ps(this,"unshift",t)},values(){return Lr(this,"values",we)}};function Lr(t,e,s){const r=mr(t),n=r[e]();return r!==t&&!He(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const Va=Array.prototype;function ot(t,e,s,r,n,i){const o=mr(t),a=o!==t&&!He(t),l=o[e];if(l!==Va[e]){const f=l.apply(t,i);return a?we(f):f}let c=s;o!==t&&(a?c=function(f,m){return s.call(this,we(f),m,t)}:s.length>2&&(c=function(f,m){return s.call(this,f,m,t)}));const u=l.call(o,c,r);return a&&n?n(u):u}function Jn(t,e,s,r){const n=mr(t);let i=s;return n!==t&&(He(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,we(a),l,t)}),n[e](i,...r)}function Dr(t,e,s){const r=Q(t);be(r,"iterate",Os);const n=r[e](...s);return(n===-1||n===!1)&&On(s[0])?(s[0]=Q(s[0]),r[e](...s)):n}function ps(t,e,s=[]){Pt(),Tn();const r=Q(t)[e].apply(t,s);return kn(),Ct(),r}const Ba=_n("__proto__,__v_isRef,__isVue"),eo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(st));function Ha(t){st(t)||(t=String(t));const e=Q(this);return be(e,"has",t),e.hasOwnProperty(t)}class to{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?Za:io:i?no:ro).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=D(e);if(!n){let l;if(o&&(l=Na[s]))return l;if(s==="hasOwnProperty")return Ha}const a=Reflect.get(e,s,Te(e)?e:r);return(st(s)?eo.has(s):Ba(s))||(n||be(e,"get",s),i)?a:Te(a)?o&&wn(s)?a:a.value:ae(a)?n?oo(a):Pn(a):a}}class so extends to{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const l=Nt(i);if(!He(r)&&!Nt(r)&&(i=Q(i),r=Q(r)),!D(e)&&Te(i)&&!Te(r))return l?!1:(i.value=r,!0)}const o=D(e)&&wn(s)?Number(s)<e.length:X(e,s),a=Reflect.set(e,s,r,Te(e)?e:n);return e===Q(n)&&(o?Et(r,i)&&ut(e,"set",s,r):ut(e,"add",s,r)),a}deleteProperty(e,s){const r=X(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&ut(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!st(s)||!eo.has(s))&&be(e,"has",s),r}ownKeys(e){return be(e,"iterate",D(e)?"length":Ut),Reflect.ownKeys(e)}}class Ga extends to{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const qa=new so,Ka=new Ga,Ja=new so(!0);const tn=t=>t,Hs=t=>Reflect.getPrototypeOf(t);function Wa(t,e,s){return function(...r){const n=this.__v_raw,i=Q(n),o=Xt(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...r),u=s?tn:e?sn:we;return!e&&be(i,"iterate",l?en:Ut),{next(){const{value:f,done:m}=c.next();return m?{value:f,done:m}:{value:a?[u(f[0]),u(f[1])]:u(f),done:m}},[Symbol.iterator](){return this}}}}function Gs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function za(t,e){const s={get(n){const i=this.__v_raw,o=Q(i),a=Q(n);t||(Et(n,a)&&be(o,"get",n),be(o,"get",a));const{has:l}=Hs(o),c=e?tn:t?sn:we;if(l.call(o,n))return c(i.get(n));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&be(Q(n),"iterate",Ut),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=Q(i),a=Q(n);return t||(Et(n,a)&&be(o,"has",n),be(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=Q(a),c=e?tn:t?sn:we;return!t&&be(l,"iterate",Ut),a.forEach((u,f)=>n.call(i,c(u),c(f),o))}};return _e(s,t?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(n){!e&&!He(n)&&!Nt(n)&&(n=Q(n));const i=Q(this);return Hs(i).has.call(i,n)||(i.add(n),ut(i,"add",n,n)),this},set(n,i){!e&&!He(i)&&!Nt(i)&&(i=Q(i));const o=Q(this),{has:a,get:l}=Hs(o);let c=a.call(o,n);c||(n=Q(n),c=a.call(o,n));const u=l.call(o,n);return o.set(n,i),c?Et(i,u)&&ut(o,"set",n,i):ut(o,"add",n,i),this},delete(n){const i=Q(this),{has:o,get:a}=Hs(i);let l=o.call(i,n);l||(n=Q(n),l=o.call(i,n)),a&&a.call(i,n);const c=i.delete(n);return l&&ut(i,"delete",n,void 0),c},clear(){const n=Q(this),i=n.size!==0,o=n.clear();return i&&ut(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Wa(n,t,e)}),s}function Rn(t,e){const s=za(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(X(s,n)&&n in r?s:r,n,i)}const Ya={get:Rn(!1,!1)},Qa={get:Rn(!1,!0)},Xa={get:Rn(!0,!1)};const ro=new WeakMap,no=new WeakMap,io=new WeakMap,Za=new WeakMap;function el(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tl(t){return t.__v_skip||!Object.isExtensible(t)?0:el(xa(t))}function Pn(t){return Nt(t)?t:Cn(t,!1,qa,Ya,ro)}function sl(t){return Cn(t,!1,Ja,Qa,no)}function oo(t){return Cn(t,!0,Ka,Xa,io)}function Cn(t,e,s,r,n){if(!ae(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=n.get(t);if(i)return i;const o=tl(t);if(o===0)return t;const a=new Proxy(t,o===2?r:s);return n.set(t,a),a}function Zt(t){return Nt(t)?Zt(t.__v_raw):!!(t&&t.__v_isReactive)}function Nt(t){return!!(t&&t.__v_isReadonly)}function He(t){return!!(t&&t.__v_isShallow)}function On(t){return t?!!t.__v_raw:!1}function Q(t){const e=t&&t.__v_raw;return e?Q(e):t}function rl(t){return!X(t,"__v_skip")&&Object.isExtensible(t)&&Bi(t,"__v_skip",!0),t}const we=t=>ae(t)?Pn(t):t,sn=t=>ae(t)?oo(t):t;function Te(t){return t?t.__v_isRef===!0:!1}function re(t){return nl(t,!1)}function nl(t,e){return Te(t)?t:new il(t,e)}class il{constructor(e,s){this.dep=new En,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Q(e),this._value=s?e:we(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||He(e)||Nt(e);e=r?e:Q(e),Et(e,s)&&(this._rawValue=e,this._value=r?e:we(e),this.dep.trigger())}}function ol(t){return Te(t)?t.value:t}const al={get:(t,e,s)=>e==="__v_raw"?t:ol(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return Te(n)&&!Te(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function ao(t){return Zt(t)?t:new Proxy(t,al)}class ll{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new En(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ie!==this)return Wi(this,!0),!0}get value(){const e=this.dep.track();return Qi(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ul(t,e,s=!1){let r,n;return H(t)?r=t:(r=t.get,n=t.set),new ll(r,n,s)}const qs={},rr=new WeakMap;let Mt;function cl(t,e=!1,s=Mt){if(s){let r=rr.get(s);r||rr.set(s,r=[]),r.push(t)}}function dl(t,e,s=se){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,c=O=>n?O:He(O)||n===!1||n===0?ct(O,1):ct(O);let u,f,m,b,E=!1,C=!1;if(Te(t)?(f=()=>t.value,E=He(t)):Zt(t)?(f=()=>c(t),E=!0):D(t)?(C=!0,E=t.some(O=>Zt(O)||He(O)),f=()=>t.map(O=>{if(Te(O))return O.value;if(Zt(O))return c(O);if(H(O))return l?l(O,2):O()})):H(t)?e?f=l?()=>l(t,2):t:f=()=>{if(m){Pt();try{m()}finally{Ct()}}const O=Mt;Mt=u;try{return l?l(t,3,[b]):t(b)}finally{Mt=O}}:f=Je,e&&n){const O=f,J=n===!0?1/0:n;f=()=>ct(O(),J)}const $=La(),I=()=>{u.stop(),$&&$.active&&bn($.effects,u)};if(i&&e){const O=e;e=(...J)=>{O(...J),I()}}let N=C?new Array(t.length).fill(qs):qs;const U=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(e){const J=u.run();if(n||E||(C?J.some((ke,z)=>Et(ke,N[z])):Et(J,N))){m&&m();const ke=Mt;Mt=u;try{const z=[J,N===qs?void 0:C&&N[0]===qs?[]:N,b];l?l(e,3,z):e(...z),N=J}finally{Mt=ke}}}else u.run()};return a&&a(U),u=new Ki(f),u.scheduler=o?()=>o(U,!1):U,b=O=>cl(O,!1,u),m=u.onStop=()=>{const O=rr.get(u);if(O){if(l)l(O,4);else for(const J of O)J();rr.delete(u)}},e?r?U(!0):N=u.run():o?o(U.bind(null,!0),!0):u.run(),I.pause=u.pause.bind(u),I.resume=u.resume.bind(u),I.stop=I,I}function ct(t,e=1/0,s){if(e<=0||!ae(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Te(t))ct(t.value,e,s);else if(D(t))for(let r=0;r<t.length;r++)ct(t[r],e,s);else if(fr(t)||Xt(t))t.forEach(r=>{ct(r,e,s)});else if(Ni(t)){for(const r in t)ct(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ct(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fs(t,e,s,r){try{return r?t(...r):t()}catch(n){_r(n,e,s)}}function rt(t,e,s,r){if(H(t)){const n=Fs(t,e,s,r);return n&&Di(n)&&n.catch(i=>{_r(i,e,s)}),n}if(D(t)){const n=[];for(let i=0;i<t.length;i++)n.push(rt(t[i],e,s,r));return n}}function _r(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||se;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}a=a.parent}if(i){Pt(),Fs(i,null,10,[t,l,c]),Ct();return}}hl(t,s,n,r,o)}function hl(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const Re=[];let Ze=-1;const es=[];let wt=null,zt=0;const lo=Promise.resolve();let nr=null;function uo(t){const e=nr||lo;return t?e.then(this?t.bind(this):t):e}function fl(t){let e=Ze+1,s=Re.length;for(;e<s;){const r=e+s>>>1,n=Re[r],i=As(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function An(t){if(!(t.flags&1)){const e=As(t),s=Re[Re.length-1];!s||!(t.flags&2)&&e>=As(s)?Re.push(t):Re.splice(fl(e),0,t),t.flags|=1,co()}}function co(){nr||(nr=lo.then(fo))}function pl(t){D(t)?es.push(...t):wt&&t.id===-1?wt.splice(zt+1,0,t):t.flags&1||(es.push(t),t.flags|=1),co()}function Wn(t,e,s=Ze+1){for(;s<Re.length;s++){const r=Re[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Re.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ho(t){if(es.length){const e=[...new Set(es)].sort((s,r)=>As(s)-As(r));if(es.length=0,wt){wt.push(...e);return}for(wt=e,zt=0;zt<wt.length;zt++){const s=wt[zt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}wt=null,zt=0}}const As=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fo(t){const e=Je;try{for(Ze=0;Ze<Re.length;Ze++){const s=Re[Ze];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),Fs(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Ze<Re.length;Ze++){const s=Re[Ze];s&&(s.flags&=-2)}Ze=-1,Re.length=0,ho(),nr=null,(Re.length||es.length)&&fo()}}let Le=null,po=null;function ir(t){const e=Le;return Le=t,po=t&&t.type.__scopeId||null,e}function gl(t,e=Le,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&si(-1);const i=ir(e);let o;try{o=t(...n)}finally{ir(i),r._d&&si(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function fe(t,e){if(Le===null)return t;const s=Sr(Le),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,l=se]=e[n];i&&(H(i)&&(i={mounted:i,updated:i}),i.deep&&ct(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function jt(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Pt(),rt(l,s,8,[t.el,a,t,e]),Ct())}}const vl=Symbol("_vte"),ml=t=>t.__isTeleport;function jn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,jn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function go(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function or(t,e,s,r,n=!1){if(D(t)){t.forEach((E,C)=>or(E,e&&(D(e)?e[C]:e),s,r,n));return}if(Ts(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&or(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?Sr(r.component):r.el,o=n?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===se?a.refs={}:a.refs,f=a.setupState,m=Q(f),b=f===se?()=>!1:E=>X(m,E);if(c!=null&&c!==l&&(ue(c)?(u[c]=null,b(c)&&(f[c]=null)):Te(c)&&(c.value=null)),H(l))Fs(l,a,12,[o,u]);else{const E=ue(l),C=Te(l);if(E||C){const $=()=>{if(t.f){const I=E?b(l)?f[l]:u[l]:l.value;n?D(I)&&bn(I,i):D(I)?I.includes(i)||I.push(i):E?(u[l]=[i],b(l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else E?(u[l]=o,b(l)&&(f[l]=o)):C&&(l.value=o,t.k&&(u[t.k]=o))};o?($.id=-1,Ie($,s)):$()}}}gr().requestIdleCallback;gr().cancelIdleCallback;const Ts=t=>!!t.type.__asyncLoader,vo=t=>t.type.__isKeepAlive;function _l(t,e){mo(t,"a",e)}function yl(t,e){mo(t,"da",e)}function mo(t,e,s=Se){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(yr(e,r,s),s){let n=s.parent;for(;n&&n.parent;)vo(n.parent.vnode)&&bl(r,e,s,n),n=n.parent}}function bl(t,e,s,r){const n=yr(e,t,r,!0);bo(()=>{bn(r[e],n)},s)}function yr(t,e,s=Se,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Pt();const a=Ls(s),l=rt(e,s,t,o);return a(),Ct(),l});return r?n.unshift(i):n.push(i),i}}const dt=t=>(e,s=Se)=>{(!$s||t==="sp")&&yr(t,(...r)=>e(...r),s)},_o=dt("bm"),yo=dt("m"),wl=dt("bu"),Sl=dt("u"),Tl=dt("bum"),bo=dt("um"),kl=dt("sp"),xl=dt("rtg"),El=dt("rtc");function Rl(t,e=Se){yr("ec",t,e)}const Pl=Symbol.for("v-ndc");function gs(t,e,s,r){let n;const i=s&&s[r],o=D(t);if(o||ue(t)){const a=o&&Zt(t);let l=!1;a&&(l=!He(t),t=mr(t)),n=new Array(t.length);for(let c=0,u=t.length;c<u;c++)n[c]=e(l?we(t[c]):t[c],c,void 0,i&&i[c])}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i&&i[a])}else if(ae(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];n[l]=e(t[u],u,l,i&&i[l])}}else n=[];return s&&(s[r]=n),n}const rn=t=>t?Vo(t)?Sr(t):rn(t.parent):null,ks=_e(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>rn(t.parent),$root:t=>rn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>$n(t),$forceUpdate:t=>t.f||(t.f=()=>{An(t.update)}),$nextTick:t=>t.n||(t.n=uo.bind(t.proxy)),$watch:t=>Yl.bind(t)}),Ur=(t,e)=>t!==se&&!t.__isScriptSetup&&X(t,e),Cl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const b=o[e];if(b!==void 0)switch(b){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(Ur(r,e))return o[e]=1,r[e];if(n!==se&&X(n,e))return o[e]=2,n[e];if((c=t.propsOptions[0])&&X(c,e))return o[e]=3,i[e];if(s!==se&&X(s,e))return o[e]=4,s[e];nn&&(o[e]=0)}}const u=ks[e];let f,m;if(u)return e==="$attrs"&&be(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(s!==se&&X(s,e))return o[e]=4,s[e];if(m=l.config.globalProperties,X(m,e))return m[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return Ur(n,e)?(n[e]=s,!0):r!==se&&X(r,e)?(r[e]=s,!0):X(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i}},o){let a;return!!s[o]||t!==se&&X(t,o)||Ur(e,o)||(a=i[0])&&X(a,o)||X(r,o)||X(ks,o)||X(n.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:X(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function zn(t){return D(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let nn=!0;function Ol(t){const e=$n(t),s=t.proxy,r=t.ctx;nn=!1,e.beforeCreate&&Yn(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:m,beforeUpdate:b,updated:E,activated:C,deactivated:$,beforeDestroy:I,beforeUnmount:N,destroyed:U,unmounted:O,render:J,renderTracked:ke,renderTriggered:z,errorCaptured:W,serverPrefetch:ht,expose:ce,inheritAttrs:qe,components:Ue,directives:At,filters:ft}=e;if(c&&Al(c,r,null),o)for(const oe in o){const Z=o[oe];H(Z)&&(r[oe]=Z.bind(s))}if(n){const oe=n.call(s,s);ae(oe)&&(t.data=Pn(oe))}if(nn=!0,i)for(const oe in i){const Z=i[oe],nt=H(Z)?Z.bind(s,s):H(Z.get)?Z.get.bind(s,s):Je,Ne=!H(Z)&&H(Z.set)?Z.set.bind(s):Je,it=_t({get:nt,set:Ne});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>it.value,set:Ve=>it.value=Ve})}if(a)for(const oe in a)wo(a[oe],r,s,oe);if(l){const oe=H(l)?l.call(s):l;Reflect.ownKeys(oe).forEach(Z=>{Ll(Z,oe[Z])})}u&&Yn(u,t,"c");function ge(oe,Z){D(Z)?Z.forEach(nt=>oe(nt.bind(s))):Z&&oe(Z.bind(s))}if(ge(_o,f),ge(yo,m),ge(wl,b),ge(Sl,E),ge(_l,C),ge(yl,$),ge(Rl,W),ge(El,ke),ge(xl,z),ge(Tl,N),ge(bo,O),ge(kl,ht),D(ce))if(ce.length){const oe=t.exposed||(t.exposed={});ce.forEach(Z=>{Object.defineProperty(oe,Z,{get:()=>s[Z],set:nt=>s[Z]=nt})})}else t.exposed||(t.exposed={});J&&t.render===Je&&(t.render=J),qe!=null&&(t.inheritAttrs=qe),Ue&&(t.components=Ue),At&&(t.directives=At),ht&&go(t)}function Al(t,e,s=Je){D(t)&&(t=on(t));for(const r in t){const n=t[r];let i;ae(n)?"default"in n?i=Xs(n.from||r,n.default,!0):i=Xs(n.from||r):i=Xs(n),Te(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Yn(t,e,s){rt(D(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function wo(t,e,s,r){let n=r.includes(".")?Mo(s,r):()=>s[r];if(ue(t)){const i=e[t];H(i)&&ss(n,i)}else if(H(t))ss(n,t.bind(s));else if(ae(t))if(D(t))t.forEach(i=>wo(i,e,s,r));else{const i=H(t.handler)?t.handler.bind(s):e[t.handler];H(i)&&ss(n,i,t)}}function $n(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(c=>ar(l,c,o,!0)),ar(l,e,o)),ae(e)&&i.set(e,l),l}function ar(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&ar(t,i,s,!0),n&&n.forEach(o=>ar(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=jl[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const jl={data:Qn,props:Xn,emits:Xn,methods:_s,computed:_s,beforeCreate:Ee,created:Ee,beforeMount:Ee,mounted:Ee,beforeUpdate:Ee,updated:Ee,beforeDestroy:Ee,beforeUnmount:Ee,destroyed:Ee,unmounted:Ee,activated:Ee,deactivated:Ee,errorCaptured:Ee,serverPrefetch:Ee,components:_s,directives:_s,watch:Il,provide:Qn,inject:$l};function Qn(t,e){return e?t?function(){return _e(H(t)?t.call(this,this):t,H(e)?e.call(this,this):e)}:e:t}function $l(t,e){return _s(on(t),on(e))}function on(t){if(D(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Ee(t,e){return t?[...new Set([].concat(t,e))]:e}function _s(t,e){return t?_e(Object.create(null),t,e):e}function Xn(t,e){return t?D(t)&&D(e)?[...new Set([...t,...e])]:_e(Object.create(null),zn(t),zn(e??{})):e}function Il(t,e){if(!t)return e;if(!e)return t;const s=_e(Object.create(null),t);for(const r in e)s[r]=Ee(t[r],e[r]);return s}function So(){return{app:null,config:{isNativeTag:Ta,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ml=0;function Fl(t,e){return function(r,n=null){H(r)||(r=_e({},r)),n!=null&&!ae(n)&&(n=null);const i=So(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:Ml++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:yu,get config(){return i.config},set config(u){},use(u,...f){return o.has(u)||(u&&H(u.install)?(o.add(u),u.install(c,...f)):H(u)&&(o.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,m){if(!l){const b=c._ceVNode||ze(r,n);return b.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),f&&e?e(b,u):t(b,u,m),l=!0,c._container=u,u.__vue_app__=c,Sr(b.component)}},onUnmount(u){a.push(u)},unmount(){l&&(rt(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=ts;ts=c;try{return u()}finally{ts=f}}};return c}}let ts=null;function Ll(t,e){if(Se){let s=Se.provides;const r=Se.parent&&Se.parent.provides;r===s&&(s=Se.provides=Object.create(r)),s[t]=e}}function Xs(t,e,s=!1){const r=Se||Le;if(r||ts){const n=ts?ts._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&H(e)?e.call(r&&r.proxy):e}}const To={},ko=()=>Object.create(To),xo=t=>Object.getPrototypeOf(t)===To;function Dl(t,e,s,r=!1){const n={},i=ko();t.propsDefaults=Object.create(null),Eo(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:sl(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function Ul(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=Q(n),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let m=u[f];if(br(t.emitsOptions,m))continue;const b=e[m];if(l)if(X(i,m))b!==i[m]&&(i[m]=b,c=!0);else{const E=Rt(m);n[E]=an(l,a,E,b,t,!1)}else b!==i[m]&&(i[m]=b,c=!0)}}}else{Eo(t,e,n,i)&&(c=!0);let u;for(const f in a)(!e||!X(e,f)&&((u=Bt(f))===f||!X(e,u)))&&(l?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=an(l,a,f,void 0,t,!0)):delete n[f]);if(i!==a)for(const f in i)(!e||!X(e,f))&&(delete i[f],c=!0)}c&&ut(t.attrs,"set","")}function Eo(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(bs(l))continue;const c=e[l];let u;n&&X(n,u=Rt(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:br(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Q(s),c=a||se;for(let u=0;u<i.length;u++){const f=i[u];s[f]=an(n,l,f,c[f],t,!X(c,f))}}return o}function an(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=X(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&H(l)){const{propsDefaults:c}=n;if(s in c)r=c[s];else{const u=Ls(n);r=c[s]=l.call(null,e),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Bt(s))&&(r=!0))}return r}const Nl=new WeakMap;function Ro(t,e,s=!1){const r=s?Nl:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!H(t)){const u=f=>{l=!0;const[m,b]=Ro(f,e,!0);_e(o,m),b&&a.push(...b)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ae(t)&&r.set(t,Qt),Qt;if(D(i))for(let u=0;u<i.length;u++){const f=Rt(i[u]);Zn(f)&&(o[f]=se)}else if(i)for(const u in i){const f=Rt(u);if(Zn(f)){const m=i[u],b=o[f]=D(m)||H(m)?{type:m}:_e({},m),E=b.type;let C=!1,$=!0;if(D(E))for(let I=0;I<E.length;++I){const N=E[I],U=H(N)&&N.name;if(U==="Boolean"){C=!0;break}else U==="String"&&($=!1)}else C=H(E)&&E.name==="Boolean";b[0]=C,b[1]=$,(C||X(b,"default"))&&a.push(f)}}const c=[o,a];return ae(t)&&r.set(t,c),c}function Zn(t){return t[0]!=="$"&&!bs(t)}const Po=t=>t[0]==="_"||t==="$stable",In=t=>D(t)?t.map(tt):[tt(t)],Vl=(t,e,s)=>{if(e._n)return e;const r=gl((...n)=>In(e(...n)),s);return r._c=!1,r},Co=(t,e,s)=>{const r=t._ctx;for(const n in t){if(Po(n))continue;const i=t[n];if(H(i))e[n]=Vl(n,i,r);else if(i!=null){const o=In(i);e[n]=()=>o}}},Oo=(t,e)=>{const s=In(e);t.slots.default=()=>s},Ao=(t,e,s)=>{for(const r in e)(s||r!=="_")&&(t[r]=e[r])},Bl=(t,e,s)=>{const r=t.slots=ko();if(t.vnode.shapeFlag&32){const n=e._;n?(Ao(r,e,s),s&&Bi(r,"_",n,!0)):Co(e,r)}else e&&Oo(t,e)},Hl=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=se;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:Ao(n,e,s):(i=!e.$stable,Co(e,n)),o=e}else e&&(Oo(t,e),o={default:1});if(i)for(const a in n)!Po(a)&&o[a]==null&&delete n[a]},Ie=ru;function Gl(t){return ql(t)}function ql(t,e){const s=gr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:m,setScopeId:b=Je,insertStaticContent:E}=t,C=(h,g,y,k=null,w=null,S=null,R=void 0,P=null,x=!!g.dynamicChildren)=>{if(h===g)return;h&&!vs(h,g)&&(k=Be(h),Ve(h,w,S,!0),h=null),g.patchFlag===-2&&(x=!1,g.dynamicChildren=null);const{type:T,ref:F,shapeFlag:j}=g;switch(T){case wr:$(h,g,y,k);break;case Vt:I(h,g,y,k);break;case Zs:h==null&&N(g,y,k,R);break;case Ae:Ue(h,g,y,k,w,S,R,P,x);break;default:j&1?J(h,g,y,k,w,S,R,P,x):j&6?At(h,g,y,k,w,S,R,P,x):(j&64||j&128)&&T.process(h,g,y,k,w,S,R,P,x,gt)}F!=null&&w&&or(F,h&&h.ref,S,g||h,!g)},$=(h,g,y,k)=>{if(h==null)r(g.el=a(g.children),y,k);else{const w=g.el=h.el;g.children!==h.children&&c(w,g.children)}},I=(h,g,y,k)=>{h==null?r(g.el=l(g.children||""),y,k):g.el=h.el},N=(h,g,y,k)=>{[h.el,h.anchor]=E(h.children,g,y,k,h.el,h.anchor)},U=({el:h,anchor:g},y,k)=>{let w;for(;h&&h!==g;)w=m(h),r(h,y,k),h=w;r(g,y,k)},O=({el:h,anchor:g})=>{let y;for(;h&&h!==g;)y=m(h),n(h),h=y;n(g)},J=(h,g,y,k,w,S,R,P,x)=>{g.type==="svg"?R="svg":g.type==="math"&&(R="mathml"),h==null?ke(g,y,k,w,S,R,P,x):ht(h,g,w,S,R,P,x)},ke=(h,g,y,k,w,S,R,P)=>{let x,T;const{props:F,shapeFlag:j,transition:M,dirs:L}=h;if(x=h.el=o(h.type,S,F&&F.is,F),j&8?u(x,h.children):j&16&&W(h.children,x,null,k,w,Nr(h,S),R,P),L&&jt(h,null,k,"created"),z(x,h,h.scopeId,R,k),F){for(const Y in F)Y!=="value"&&!bs(Y)&&i(x,Y,null,F[Y],S,k);"value"in F&&i(x,"value",null,F.value,S),(T=F.onVnodeBeforeMount)&&Qe(T,k,h)}L&&jt(h,null,k,"beforeMount");const G=Kl(w,M);G&&M.beforeEnter(x),r(x,g,y),((T=F&&F.onVnodeMounted)||G||L)&&Ie(()=>{T&&Qe(T,k,h),G&&M.enter(x),L&&jt(h,null,k,"mounted")},w)},z=(h,g,y,k,w)=>{if(y&&b(h,y),k)for(let S=0;S<k.length;S++)b(h,k[S]);if(w){let S=w.subTree;if(g===S||Lo(S.type)&&(S.ssContent===g||S.ssFallback===g)){const R=w.vnode;z(h,R,R.scopeId,R.slotScopeIds,w.parent)}}},W=(h,g,y,k,w,S,R,P,x=0)=>{for(let T=x;T<h.length;T++){const F=h[T]=P?St(h[T]):tt(h[T]);C(null,F,g,y,k,w,S,R,P)}},ht=(h,g,y,k,w,S,R)=>{const P=g.el=h.el;let{patchFlag:x,dynamicChildren:T,dirs:F}=g;x|=h.patchFlag&16;const j=h.props||se,M=g.props||se;let L;if(y&&$t(y,!1),(L=M.onVnodeBeforeUpdate)&&Qe(L,y,g,h),F&&jt(g,h,y,"beforeUpdate"),y&&$t(y,!0),(j.innerHTML&&M.innerHTML==null||j.textContent&&M.textContent==null)&&u(P,""),T?ce(h.dynamicChildren,T,P,y,k,Nr(g,w),S):R||Z(h,g,P,null,y,k,Nr(g,w),S,!1),x>0){if(x&16)qe(P,j,M,y,w);else if(x&2&&j.class!==M.class&&i(P,"class",null,M.class,w),x&4&&i(P,"style",j.style,M.style,w),x&8){const G=g.dynamicProps;for(let Y=0;Y<G.length;Y++){const K=G[Y],he=j[K],le=M[K];(le!==he||K==="value")&&i(P,K,he,le,w,y)}}x&1&&h.children!==g.children&&u(P,g.children)}else!R&&T==null&&qe(P,j,M,y,w);((L=M.onVnodeUpdated)||F)&&Ie(()=>{L&&Qe(L,y,g,h),F&&jt(g,h,y,"updated")},k)},ce=(h,g,y,k,w,S,R)=>{for(let P=0;P<g.length;P++){const x=h[P],T=g[P],F=x.el&&(x.type===Ae||!vs(x,T)||x.shapeFlag&70)?f(x.el):y;C(x,T,F,null,k,w,S,R,!0)}},qe=(h,g,y,k,w)=>{if(g!==y){if(g!==se)for(const S in g)!bs(S)&&!(S in y)&&i(h,S,g[S],null,w,k);for(const S in y){if(bs(S))continue;const R=y[S],P=g[S];R!==P&&S!=="value"&&i(h,S,P,R,w,k)}"value"in y&&i(h,"value",g.value,y.value,w)}},Ue=(h,g,y,k,w,S,R,P,x)=>{const T=g.el=h?h.el:a(""),F=g.anchor=h?h.anchor:a("");let{patchFlag:j,dynamicChildren:M,slotScopeIds:L}=g;L&&(P=P?P.concat(L):L),h==null?(r(T,y,k),r(F,y,k),W(g.children||[],y,F,w,S,R,P,x)):j>0&&j&64&&M&&h.dynamicChildren?(ce(h.dynamicChildren,M,y,w,S,R,P),(g.key!=null||w&&g===w.subTree)&&jo(h,g,!0)):Z(h,g,y,F,w,S,R,P,x)},At=(h,g,y,k,w,S,R,P,x)=>{g.slotScopeIds=P,h==null?g.shapeFlag&512?w.ctx.activate(g,y,k,R,x):ft(g,y,k,w,S,R,x):Gt(h,g,x)},ft=(h,g,y,k,w,S,R)=>{const P=h.component=hu(h,k,w);if(vo(h)&&(P.ctx.renderer=gt),pu(P,!1,R),P.asyncDep){if(w&&w.registerDep(P,ge,R),!h.el){const x=P.subTree=ze(Vt);I(null,x,g,y)}}else ge(P,h,g,y,w,S,R)},Gt=(h,g,y)=>{const k=g.component=h.component;if(tu(h,g,y))if(k.asyncDep&&!k.asyncResolved){oe(k,g,y);return}else k.next=g,k.update();else g.el=h.el,k.vnode=g},ge=(h,g,y,k,w,S,R)=>{const P=()=>{if(h.isMounted){let{next:j,bu:M,u:L,parent:G,vnode:Y}=h;{const xe=$o(h);if(xe){j&&(j.el=Y.el,oe(h,j,R)),xe.asyncDep.then(()=>{h.isUnmounted||P()});return}}let K=j,he;$t(h,!1),j?(j.el=Y.el,oe(h,j,R)):j=Y,M&&Qs(M),(he=j.props&&j.props.onVnodeBeforeUpdate)&&Qe(he,G,j,Y),$t(h,!0);const le=Vr(h),Pe=h.subTree;h.subTree=le,C(Pe,le,f(Pe.el),Be(Pe),h,w,S),j.el=le.el,K===null&&su(h,le.el),L&&Ie(L,w),(he=j.props&&j.props.onVnodeUpdated)&&Ie(()=>Qe(he,G,j,Y),w)}else{let j;const{el:M,props:L}=g,{bm:G,m:Y,parent:K,root:he,type:le}=h,Pe=Ts(g);if($t(h,!1),G&&Qs(G),!Pe&&(j=L&&L.onVnodeBeforeMount)&&Qe(j,K,g),$t(h,!0),M&&hs){const xe=()=>{h.subTree=Vr(h),hs(M,h.subTree,h,w,null)};Pe&&le.__asyncHydrate?le.__asyncHydrate(M,h,xe):xe()}else{he.ce&&he.ce._injectChildStyle(le);const xe=h.subTree=Vr(h);C(null,xe,y,k,h,w,S),g.el=xe.el}if(Y&&Ie(Y,w),!Pe&&(j=L&&L.onVnodeMounted)){const xe=g;Ie(()=>Qe(j,K,xe),w)}(g.shapeFlag&256||K&&Ts(K.vnode)&&K.vnode.shapeFlag&256)&&h.a&&Ie(h.a,w),h.isMounted=!0,g=y=k=null}};h.scope.on();const x=h.effect=new Ki(P);h.scope.off();const T=h.update=x.run.bind(x),F=h.job=x.runIfDirty.bind(x);F.i=h,F.id=h.uid,x.scheduler=()=>An(F),$t(h,!0),T()},oe=(h,g,y)=>{g.component=h;const k=h.vnode.props;h.vnode=g,h.next=null,Ul(h,g.props,k,y),Hl(h,g.children,y),Pt(),Wn(h),Ct()},Z=(h,g,y,k,w,S,R,P,x=!1)=>{const T=h&&h.children,F=h?h.shapeFlag:0,j=g.children,{patchFlag:M,shapeFlag:L}=g;if(M>0){if(M&128){Ne(T,j,y,k,w,S,R,P,x);return}else if(M&256){nt(T,j,y,k,w,S,R,P,x);return}}L&8?(F&16&&Ye(T,w,S),j!==T&&u(y,j)):F&16?L&16?Ne(T,j,y,k,w,S,R,P,x):Ye(T,w,S,!0):(F&8&&u(y,""),L&16&&W(j,y,k,w,S,R,P,x))},nt=(h,g,y,k,w,S,R,P,x)=>{h=h||Qt,g=g||Qt;const T=h.length,F=g.length,j=Math.min(T,F);let M;for(M=0;M<j;M++){const L=g[M]=x?St(g[M]):tt(g[M]);C(h[M],L,y,null,w,S,R,P,x)}T>F?Ye(h,w,S,!0,!1,j):W(g,y,k,w,S,R,P,x,j)},Ne=(h,g,y,k,w,S,R,P,x)=>{let T=0;const F=g.length;let j=h.length-1,M=F-1;for(;T<=j&&T<=M;){const L=h[T],G=g[T]=x?St(g[T]):tt(g[T]);if(vs(L,G))C(L,G,y,null,w,S,R,P,x);else break;T++}for(;T<=j&&T<=M;){const L=h[j],G=g[M]=x?St(g[M]):tt(g[M]);if(vs(L,G))C(L,G,y,null,w,S,R,P,x);else break;j--,M--}if(T>j){if(T<=M){const L=M+1,G=L<F?g[L].el:k;for(;T<=M;)C(null,g[T]=x?St(g[T]):tt(g[T]),y,G,w,S,R,P,x),T++}}else if(T>M)for(;T<=j;)Ve(h[T],w,S,!0),T++;else{const L=T,G=T,Y=new Map;for(T=G;T<=M;T++){const de=g[T]=x?St(g[T]):tt(g[T]);de.key!=null&&Y.set(de.key,T)}let K,he=0;const le=M-G+1;let Pe=!1,xe=0;const mt=new Array(le);for(T=0;T<le;T++)mt[T]=0;for(T=L;T<=j;T++){const de=h[T];if(he>=le){Ve(de,w,S,!0);continue}let $e;if(de.key!=null)$e=Y.get(de.key);else for(K=G;K<=M;K++)if(mt[K-G]===0&&vs(de,g[K])){$e=K;break}$e===void 0?Ve(de,w,S,!0):(mt[$e-G]=T+1,$e>=xe?xe=$e:Pe=!0,C(de,g[$e],y,null,w,S,R,P,x),he++)}const Vs=Pe?Jl(mt):Qt;for(K=Vs.length-1,T=le-1;T>=0;T--){const de=G+T,$e=g[de],Bs=de+1<F?g[de+1].el:k;mt[T]===0?C(null,$e,y,Bs,w,S,R,P,x):Pe&&(K<0||T!==Vs[K]?it($e,y,Bs,2):K--)}}},it=(h,g,y,k,w=null)=>{const{el:S,type:R,transition:P,children:x,shapeFlag:T}=h;if(T&6){it(h.component.subTree,g,y,k);return}if(T&128){h.suspense.move(g,y,k);return}if(T&64){R.move(h,g,y,gt);return}if(R===Ae){r(S,g,y);for(let j=0;j<x.length;j++)it(x[j],g,y,k);r(h.anchor,g,y);return}if(R===Zs){U(h,g,y);return}if(k!==2&&T&1&&P)if(k===0)P.beforeEnter(S),r(S,g,y),Ie(()=>P.enter(S),w);else{const{leave:j,delayLeave:M,afterLeave:L}=P,G=()=>r(S,g,y),Y=()=>{j(S,()=>{G(),L&&L()})};M?M(S,G,Y):Y()}else r(S,g,y)},Ve=(h,g,y,k=!1,w=!1)=>{const{type:S,props:R,ref:P,children:x,dynamicChildren:T,shapeFlag:F,patchFlag:j,dirs:M,cacheIndex:L}=h;if(j===-2&&(w=!1),P!=null&&or(P,null,y,h,!0),L!=null&&(g.renderCache[L]=void 0),F&256){g.ctx.deactivate(h);return}const G=F&1&&M,Y=!Ts(h);let K;if(Y&&(K=R&&R.onVnodeBeforeUnmount)&&Qe(K,g,h),F&6)Ar(h.component,y,k);else{if(F&128){h.suspense.unmount(y,k);return}G&&jt(h,null,g,"beforeUnmount"),F&64?h.type.remove(h,g,y,gt,k):T&&!T.hasOnce&&(S!==Ae||j>0&&j&64)?Ye(T,g,y,!1,!0):(S===Ae&&j&384||!w&&F&16)&&Ye(x,g,y),k&&pt(h)}(Y&&(K=R&&R.onVnodeUnmounted)||G)&&Ie(()=>{K&&Qe(K,g,h),G&&jt(h,null,g,"unmounted")},y)},pt=h=>{const{type:g,el:y,anchor:k,transition:w}=h;if(g===Ae){Or(y,k);return}if(g===Zs){O(h);return}const S=()=>{n(y),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(h.shapeFlag&1&&w&&!w.persisted){const{leave:R,delayLeave:P}=w,x=()=>R(y,S);P?P(h.el,S,x):x()}else S()},Or=(h,g)=>{let y;for(;h!==g;)y=m(h),n(h),h=y;n(g)},Ar=(h,g,y)=>{const{bum:k,scope:w,job:S,subTree:R,um:P,m:x,a:T}=h;ei(x),ei(T),k&&Qs(k),w.stop(),S&&(S.flags|=8,Ve(R,h,g,y)),P&&Ie(P,g),Ie(()=>{h.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Ye=(h,g,y,k=!1,w=!1,S=0)=>{for(let R=S;R<h.length;R++)Ve(h[R],g,y,k,w)},Be=h=>{if(h.shapeFlag&6)return Be(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const g=m(h.anchor||h.el),y=g&&g[vl];return y?m(y):g};let ds=!1;const Ns=(h,g,y)=>{h==null?g._vnode&&Ve(g._vnode,null,null,!0):C(g._vnode||null,h,g,null,null,null,y),g._vnode=h,ds||(ds=!0,Wn(),ho(),ds=!1)},gt={p:C,um:Ve,m:it,r:pt,mt:ft,mc:W,pc:Z,pbc:ce,n:Be,o:t};let vt,hs;return e&&([vt,hs]=e(gt)),{render:Ns,hydrate:vt,createApp:Fl(Ns,vt)}}function Nr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function $t({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Kl(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function jo(t,e,s=!1){const r=t.children,n=e.children;if(D(r)&&D(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=St(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&jo(o,a)),a.type===wr&&(a.el=o.el)}}function Jl(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(n=s[s.length-1],t[n]<c){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<c?i=a+1:o=a;c<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function $o(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:$o(e)}function ei(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Wl=Symbol.for("v-scx"),zl=()=>Xs(Wl);function ss(t,e,s){return Io(t,e,s)}function Io(t,e,s=se){const{immediate:r,deep:n,flush:i,once:o}=s,a=_e({},s),l=e&&r||!e&&i!=="post";let c;if($s){if(i==="sync"){const b=zl();c=b.__watcherHandles||(b.__watcherHandles=[])}else if(!l){const b=()=>{};return b.stop=Je,b.resume=Je,b.pause=Je,b}}const u=Se;a.call=(b,E,C)=>rt(b,u,E,C);let f=!1;i==="post"?a.scheduler=b=>{Ie(b,u&&u.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(b,E)=>{E?b():An(b)}),a.augmentJob=b=>{e&&(b.flags|=4),f&&(b.flags|=2,u&&(b.id=u.uid,b.i=u))};const m=dl(t,e,a);return $s&&(c?c.push(m):l&&m()),m}function Yl(t,e,s){const r=this.proxy,n=ue(t)?t.includes(".")?Mo(r,t):()=>r[t]:t.bind(r,r);let i;H(e)?i=e:(i=e.handler,s=e);const o=Ls(this),a=Io(n,i.bind(r),s);return o(),a}function Mo(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Ql=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Rt(e)}Modifiers`]||t[`${Bt(e)}Modifiers`];function Xl(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||se;let n=s;const i=e.startsWith("update:"),o=i&&Ql(r,e.slice(7));o&&(o.trim&&(n=s.map(u=>ue(u)?u.trim():u)),o.number&&(n=s.map(sr)));let a,l=r[a=Ir(e)]||r[a=Ir(Rt(e))];!l&&i&&(l=r[a=Ir(Bt(e))]),l&&rt(l,t,6,n);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,rt(c,t,6,n)}}function Fo(t,e,s=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!H(t)){const l=c=>{const u=Fo(c,e,!0);u&&(a=!0,_e(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ae(t)&&r.set(t,null),null):(D(i)?i.forEach(l=>o[l]=null):_e(o,i),ae(t)&&r.set(t,o),o)}function br(t,e){return!t||!hr(e)?!1:(e=e.slice(2).replace(/Once$/,""),X(t,e[0].toLowerCase()+e.slice(1))||X(t,Bt(e))||X(t,e))}function Vr(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:m,setupState:b,ctx:E,inheritAttrs:C}=t,$=ir(t);let I,N;try{if(s.shapeFlag&4){const O=n||r,J=O;I=tt(c.call(J,O,u,f,b,m,E)),N=a}else{const O=e;I=tt(O.length>1?O(f,{attrs:a,slots:o,emit:l}):O(f,null)),N=e.props?a:Zl(a)}}catch(O){xs.length=0,_r(O,t,1),I=ze(Vt)}let U=I;if(N&&C!==!1){const O=Object.keys(N),{shapeFlag:J}=U;O.length&&J&7&&(i&&O.some(yn)&&(N=eu(N,i)),U=os(U,N,!1,!0))}return s.dirs&&(U=os(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(s.dirs):s.dirs),s.transition&&jn(U,s.transition),I=U,ir($),I}const Zl=t=>{let e;for(const s in t)(s==="class"||s==="style"||hr(s))&&((e||(e={}))[s]=t[s]);return e},eu=(t,e)=>{const s={};for(const r in t)(!yn(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function tu(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?ti(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const m=u[f];if(o[m]!==r[m]&&!br(c,m))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ti(r,o,c):!0:!!o;return!1}function ti(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!br(s,i))return!0}return!1}function su({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const Lo=t=>t.__isSuspense;function ru(t,e){e&&e.pendingBranch?D(t)?e.effects.push(...t):e.effects.push(t):pl(t)}const Ae=Symbol.for("v-fgt"),wr=Symbol.for("v-txt"),Vt=Symbol.for("v-cmt"),Zs=Symbol.for("v-stc"),xs=[];let De=null;function ee(t=!1){xs.push(De=t?null:[])}function nu(){xs.pop(),De=xs[xs.length-1]||null}let js=1;function si(t,e=!1){js+=t,t<0&&De&&e&&(De.hasOnce=!0)}function Do(t){return t.dynamicChildren=js>0?De||Qt:null,nu(),js>0&&De&&De.push(t),t}function te(t,e,s,r,n,i){return Do(p(t,e,s,r,n,i,!0))}function iu(t,e,s,r,n){return Do(ze(t,e,s,r,n,!0))}function Uo(t){return t?t.__v_isVNode===!0:!1}function vs(t,e){return t.type===e.type&&t.key===e.key}const No=({key:t})=>t??null,er=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ue(t)||Te(t)||H(t)?{i:Le,r:t,k:e,f:!!s}:t:null);function p(t,e=null,s=null,r=0,n=null,i=t===Ae?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&No(e),ref:e&&er(e),scopeId:po,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Le};return a?(Mn(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=ue(s)?8:16),js>0&&!o&&De&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&De.push(l),l}const ze=ou;function ou(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Pl)&&(t=Vt),Uo(t)){const a=os(t,e,!0);return s&&Mn(a,s),js>0&&!i&&De&&(a.shapeFlag&6?De[De.indexOf(t)]=a:De.push(a)),a.patchFlag=-2,a}if(_u(t)&&(t=t.__vccOpts),e){e=au(e);let{class:a,style:l}=e;a&&!ue(a)&&(e.class=et(a)),ae(l)&&(On(l)&&!D(l)&&(l=_e({},l)),e.style=Sn(l))}const o=ue(t)?1:Lo(t)?128:ml(t)?64:ae(t)?4:H(t)?2:0;return p(t,e,s,r,n,o,i,!0)}function au(t){return t?On(t)||xo(t)?_e({},t):t:null}function os(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?uu(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&No(c),ref:e&&e.ref?s&&i?D(i)?i.concat(er(e)):[i,er(e)]:er(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ae?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&os(t.ssContent),ssFallback:t.ssFallback&&os(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&jn(u,l.clone(u)),u}function rs(t=" ",e=0){return ze(wr,null,t,e)}function lu(t,e){const s=ze(Zs,null,t);return s.staticCount=e,s}function ve(t="",e=!1){return e?(ee(),iu(Vt,null,t)):ze(Vt,null,t)}function tt(t){return t==null||typeof t=="boolean"?ze(Vt):D(t)?ze(Ae,null,t.slice()):Uo(t)?St(t):ze(wr,null,String(t))}function St(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:os(t)}function Mn(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(D(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Mn(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!xo(e)?e._ctx=Le:n===3&&Le&&(Le.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else H(e)?(e={default:e,_ctx:Le},s=32):(e=String(e),r&64?(s=16,e=[rs(e)]):s=8);t.children=e,t.shapeFlag|=s}function uu(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=et([e.class,r.class]));else if(n==="style")e.style=Sn([e.style,r.style]);else if(hr(n)){const i=e[n],o=r[n];o&&i!==o&&!(D(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function Qe(t,e,s,r=null){rt(t,e,7,[s,r])}const cu=So();let du=0;function hu(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||cu,i={uid:du++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ro(r,n),emitsOptions:Fo(r,n),emit:null,emitted:null,propsDefaults:se,inheritAttrs:r.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Xl.bind(null,i),t.ce&&t.ce(i),i}let Se=null;const fu=()=>Se||Le;let lr,ln;{const t=gr(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};lr=e("__VUE_INSTANCE_SETTERS__",s=>Se=s),ln=e("__VUE_SSR_SETTERS__",s=>$s=s)}const Ls=t=>{const e=Se;return lr(t),t.scope.on(),()=>{t.scope.off(),lr(e)}},ri=()=>{Se&&Se.scope.off(),lr(null)};function Vo(t){return t.vnode.shapeFlag&4}let $s=!1;function pu(t,e=!1,s=!1){e&&ln(e);const{props:r,children:n}=t.vnode,i=Vo(t);Dl(t,r,i,e),Bl(t,n,s);const o=i?gu(t,e):void 0;return e&&ln(!1),o}function gu(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Cl);const{setup:r}=s;if(r){Pt();const n=t.setupContext=r.length>1?mu(t):null,i=Ls(t),o=Fs(r,t,0,[t.props,n]),a=Di(o);if(Ct(),i(),(a||t.sp)&&!Ts(t)&&go(t),a){if(o.then(ri,ri),e)return o.then(l=>{ni(t,l,e)}).catch(l=>{_r(l,t,0)});t.asyncDep=o}else ni(t,o,e)}else Bo(t,e)}function ni(t,e,s){H(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ae(e)&&(t.setupState=ao(e)),Bo(t,s)}let ii;function Bo(t,e,s){const r=t.type;if(!t.render){if(!e&&ii&&!r.render){const n=r.template||$n(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=_e(_e({isCustomElement:i,delimiters:a},o),l);r.render=ii(n,c)}}t.render=r.render||Je}{const n=Ls(t);Pt();try{Ol(t)}finally{Ct(),n()}}}const vu={get(t,e){return be(t,"get",""),t[e]}};function mu(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,vu),slots:t.slots,emit:t.emit,expose:e}}function Sr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ao(rl(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in ks)return ks[s](t)},has(e,s){return s in e||s in ks}})):t.proxy}function _u(t){return H(t)&&"__vccOpts"in t}const _t=(t,e)=>ul(t,e,$s),yu="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let un;const oi=typeof window<"u"&&window.trustedTypes;if(oi)try{un=oi.createPolicy("vue",{createHTML:t=>t})}catch{}const Ho=un?t=>un.createHTML(t):t=>t,bu="http://www.w3.org/2000/svg",wu="http://www.w3.org/1998/Math/MathML",at=typeof document<"u"?document:null,ai=at&&at.createElement("template"),Su={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?at.createElementNS(bu,t):e==="mathml"?at.createElementNS(wu,t):s?at.createElement(t,{is:s}):at.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>at.createTextNode(t),createComment:t=>at.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>at.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{ai.innerHTML=Ho(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=ai.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Tu=Symbol("_vtc");function ku(t,e,s){const r=t[Tu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const li=Symbol("_vod"),xu=Symbol("_vsh"),Eu=Symbol(""),Ru=/(^|;)\s*display\s*:/;function Pu(t,e,s){const r=t.style,n=ue(s);let i=!1;if(s&&!n){if(e)if(ue(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&tr(r,a,"")}else for(const o in e)s[o]==null&&tr(r,o,"");for(const o in s)o==="display"&&(i=!0),tr(r,o,s[o])}else if(n){if(e!==s){const o=r[Eu];o&&(s+=";"+o),r.cssText=s,i=Ru.test(s)}}else e&&t.removeAttribute("style");li in t&&(t[li]=i?r.display:"",t[xu]&&(r.display="none"))}const ui=/\s*!important$/;function tr(t,e,s){if(D(s))s.forEach(r=>tr(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=Cu(t,e);ui.test(s)?t.setProperty(Bt(r),s.replace(ui,""),"important"):t[r]=s}}const ci=["Webkit","Moz","ms"],Br={};function Cu(t,e){const s=Br[e];if(s)return s;let r=Rt(e);if(r!=="filter"&&r in t)return Br[e]=r;r=Vi(r);for(let n=0;n<ci.length;n++){const i=ci[n]+r;if(i in t)return Br[e]=i}return e}const di="http://www.w3.org/1999/xlink";function hi(t,e,s,r,n,i=$a(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(di,e.slice(6,e.length)):t.setAttributeNS(di,e,s):s==null||i&&!Hi(s)?t.removeAttribute(e):t.setAttribute(e,i?"":st(s)?String(s):s)}function fi(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Ho(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Hi(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Lt(t,e,s,r){t.addEventListener(e,s,r)}function Ou(t,e,s,r){t.removeEventListener(e,s,r)}const pi=Symbol("_vei");function Au(t,e,s,r,n=null){const i=t[pi]||(t[pi]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=ju(e);if(r){const c=i[e]=Mu(r,n);Lt(t,a,c,l)}else o&&(Ou(t,a,o,l),i[e]=void 0)}}const gi=/(?:Once|Passive|Capture)$/;function ju(t){let e;if(gi.test(t)){e={};let r;for(;r=t.match(gi);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bt(t.slice(2)),e]}let Hr=0;const $u=Promise.resolve(),Iu=()=>Hr||($u.then(()=>Hr=0),Hr=Date.now());function Mu(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;rt(Fu(r,s.value),e,5,[r])};return s.value=t,s.attached=Iu(),s}function Fu(t,e){if(D(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const vi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Lu=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?ku(t,r,o):e==="style"?Pu(t,s,r):hr(e)?yn(e)||Au(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Du(t,e,r,o))?(fi(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hi(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ue(r))?fi(t,Rt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),hi(t,e,r,o))};function Du(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&vi(e)&&H(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return vi(e)&&ue(s)?!1:e in t}const ur=t=>{const e=t.props["onUpdate:modelValue"]||!1;return D(e)?s=>Qs(e,s):e};function Uu(t){t.target.composing=!0}function mi(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ns=Symbol("_assign"),Ce={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[ns]=ur(n);const i=r||n.props&&n.props.type==="number";Lt(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=sr(a)),t[ns](a)}),s&&Lt(t,"change",()=>{t.value=t.value.trim()}),e||(Lt(t,"compositionstart",Uu),Lt(t,"compositionend",mi),Lt(t,"change",mi))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[ns]=ur(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?sr(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===l)||(t.value=l))}},Ks={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const n=fr(e);Lt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?sr(cr(o)):cr(o));t[ns](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,uo(()=>{t._assigning=!1})}),t[ns]=ur(r)},mounted(t,{value:e}){_i(t,e)},beforeUpdate(t,e,s){t[ns]=ur(s)},updated(t,{value:e}){t._assigning||_i(t,e)}};function _i(t,e){const s=t.multiple,r=D(e);if(!(s&&!r&&!fr(e))){for(let n=0,i=t.options.length;n<i;n++){const o=t.options[n],a=cr(o);if(s)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ma(e,a)>-1}else o.selected=e.has(a);else if(vr(cr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function cr(t){return"_value"in t?t._value:t.value}const Nu=["ctrl","shift","alt","meta"],Vu={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Nu.some(s=>t[`${s}Key`]&&!e.includes(s))},yi=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const a=Vu[e[o]];if(a&&a(n,e))return}return t(n,...i)})},Bu=_e({patchProp:Lu},Su);let bi;function Hu(){return bi||(bi=Gl(Bu))}const Gu=(...t)=>{const e=Hu().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=Ku(r);if(!n)return;const i=e._component;!H(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,qu(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function qu(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ku(t){return ue(t)?document.querySelector(t):t}const Ju="modulepreload",Wu=function(t){return"/saas-simulation/"+t},wi={},as=function(e,s,r){if(!s||s.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=Wu(i),i in wi)return;wi[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=n.length-1;u>=0;u--){const f=n[u];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Ju,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},zu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>as(()=>Promise.resolve().then(()=>us),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Fn extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Yu extends Fn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qu extends Fn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xu extends Fn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(cn||(cn={}));var Zu=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class ec{constructor(e,{headers:s={},customFetch:r,region:n=cn.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=zu(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Zu(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:c}).catch(E=>{throw new Yu(E)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new Qu(u);if(!u.ok)throw new Xu(u);let m=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield u.json():m==="application/octet-stream"?b=yield u.blob():m==="text/event-stream"?b=u:m==="multipart/form-data"?b=yield u.formData():b=yield u.text(),{data:b,error:null}}catch(n){return{data:null,error:n}}})}}var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var je={},Ln={},Tr={},Ds={},kr={},xr={},sc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ls=sc();const rc=ls.fetch,Go=ls.fetch.bind(ls),qo=ls.Headers,nc=ls.Request,ic=ls.Response,us=Object.freeze(Object.defineProperty({__proto__:null,Headers:qo,Request:nc,Response:ic,default:Go,fetch:rc},Symbol.toStringTag,{value:"Module"})),oc=tc(us);var Er={};Object.defineProperty(Er,"__esModule",{value:!0});let ac=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Er.default=ac;var Ko=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xr,"__esModule",{value:!0});const lc=Ko(oc),uc=Ko(Er);let cc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=lc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,f=null,m=i.status,b=i.statusText;if(i.ok){if(this.method!=="HEAD"){const I=await i.text();I===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=I:u=JSON.parse(I))}const C=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),$=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");C&&$&&$.length>1&&(f=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,b="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const C=await i.text();try{c=JSON.parse(C),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,b="OK")}catch{i.status===404&&C===""?(m=204,b="No Content"):c={message:C}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,b="OK"),c&&this.shouldThrowOnError)throw new uc.default(c)}return{error:c,data:u,count:f,status:m,statusText:b}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}returns(){return this}overrideTypes(){return this}};xr.default=cc;var dc=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kr,"__esModule",{value:!0});const hc=dc(xr);let fc=class extends hc.default{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};kr.default=fc;var pc=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ds,"__esModule",{value:!0});const gc=pc(kr);let vc=class extends gc.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};Ds.default=vc;var mc=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tr,"__esModule",{value:!0});const ms=mc(Ds);let _c=class{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ms.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ms.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ms.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new ms.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ms.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Tr.default=_c;var Rr={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.version=void 0;Pr.version="0.0.0-automated";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.DEFAULT_HEADERS=void 0;const yc=Pr;Rr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${yc.version}`};var Jo=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});const bc=Jo(Tr),wc=Jo(Ds),Sc=Rr;let Tc=class Wo{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Sc.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new bc.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Wo(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||n?(o=r?"HEAD":"GET",Object.entries(s).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{a.searchParams.append(u,f)})):(o="POST",l=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new wc.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Ln.default=Tc;var cs=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(je,"__esModule",{value:!0});je.PostgrestError=je.PostgrestBuilder=je.PostgrestTransformBuilder=je.PostgrestFilterBuilder=je.PostgrestQueryBuilder=je.PostgrestClient=void 0;const zo=cs(Ln);je.PostgrestClient=zo.default;const Yo=cs(Tr);je.PostgrestQueryBuilder=Yo.default;const Qo=cs(Ds);je.PostgrestFilterBuilder=Qo.default;const Xo=cs(kr);je.PostgrestTransformBuilder=Xo.default;const Zo=cs(xr);je.PostgrestBuilder=Zo.default;const ea=cs(Er);je.PostgrestError=ea.default;var kc=je.default={PostgrestClient:zo.default,PostgrestQueryBuilder:Yo.default,PostgrestFilterBuilder:Qo.default,PostgrestTransformBuilder:Xo.default,PostgrestBuilder:Zo.default,PostgrestError:ea.default};const{PostgrestClient:xc,PostgrestQueryBuilder:Ef,PostgrestFilterBuilder:Rf,PostgrestTransformBuilder:Pf,PostgrestBuilder:Cf,PostgrestError:Of}=kc,Ec="2.11.2",Rc={"X-Client-Info":`realtime-js/${Ec}`},Pc="1.0.0",ta=1e4,Cc=1e3;var is;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(is||(is={}));var Me;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Me||(Me={}));var Ke;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ke||(Ke={}));var dn;(function(t){t.websocket="websocket"})(dn||(dn={}));var Dt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dt||(Dt={}));class Oc{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class sa{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const Si=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ac(o,t,e,n),i),{})},Ac=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?ra(i,o):hn(o)},ra=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Mc(e,s)}switch(t){case ne.bool:return jc(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return $c(e);case ne.json:case ne.jsonb:return Ic(e);case ne.timestamp:return Fc(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return hn(e);default:return hn(e)}},hn=t=>t,jc=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$c=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ic=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Mc=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ra(e,a))}return t},Fc=t=>typeof t=="string"?t.replace(" ","T"):t,na=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Gr{constructor(e,s,r={},n=ta){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ti;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ti||(Ti={}));class Es{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Es.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Es.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Es.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const m=u.map($=>$.presence_ref),b=f.map($=>$.presence_ref),E=u.filter($=>b.indexOf($.presence_ref)<0),C=f.filter($=>m.indexOf($.presence_ref)<0);E.length>0&&(a[c]=E),C.length>0&&(l[c]=C)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(b=>b.presence_ref),m=u.filter(b=>f.indexOf(b.presence_ref)<0);e[a].unshift(...m)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ki;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ki||(ki={}));var xi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xi||(xi={}));var lt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(lt||(lt={}));class Dn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Gr(this,Ke.join,this.params,this.timeout),this.rejoinTimer=new sa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Me.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ke.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Es(this),this.broadcastEndpointURL=na(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(lt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(lt.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(lt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,E=[];for(let C=0;C<b;C++){const $=m[C],{filter:{event:I,schema:N,table:U,filter:O}}=$,J=u&&u[C];if(J&&J.event===I&&J.schema===N&&J.table===U&&J.filter===O)E.push(Object.assign(Object.assign({},$),{id:J.id}));else{this.unsubscribe(),e==null||e(lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(lt.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Me.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ke.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Gr(this,Ke.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Gr(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ke;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,s,r);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var E,C,$;return((E=b.filter)===null||E===void 0?void 0:E.event)==="*"||(($=(C=b.filter)===null||C===void 0?void 0:C.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===o}).map(b=>b.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(b=>{var E,C,$,I,N,U;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const O=b.id,J=(E=b.filter)===null||E===void 0?void 0:E.event;return O&&((C=s.ids)===null||C===void 0?void 0:C.includes(O))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===(($=s.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))}else{const O=(N=(I=b==null?void 0:b.filter)===null||I===void 0?void 0:I.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return O==="*"||O===((U=s==null?void 0:s.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof m=="object"&&"ids"in m){const E=m.data,{schema:C,table:$,commit_timestamp:I,type:N,errors:U}=E;m=Object.assign(Object.assign({},{schema:C,table:$,commit_timestamp:I,eventType:N,new:{},old:{},errors:U}),this._getPayloadRecords(E))}b.callback(m,r)})}_isClosed(){return this.state===Me.closed}_isJoined(){return this.state===Me.joined}_isJoining(){return this.state===Me.joining}_isLeaving(){return this.state===Me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Dn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ke.close,{},e)}_onError(e){this._on(Ke.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Si(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Si(e.columns,e.old_record)),s}}const Lc=()=>{},Dc=typeof WebSocket<"u",Uc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nc{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Rc,this.params={},this.timeout=ta,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Lc,this.conn=null,this.sendBuffer=[],this.serializer=new Oc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>as(()=>Promise.resolve().then(()=>us),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${dn.websocket}`,this.httpEndpoint=na(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sa(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Dc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Vc(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),as(()=>import("./browser-19cc367d.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pc}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case is.connecting:return Dt.Connecting;case is.open:return Dt.Open;case is.closing:return Dt.Closing;default:return Dt.Closed}}isConnected(){return this.connectionState()===Dt.Open}channel(e,s={config:{}}){const r=new Dn(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let r=null;try{r=JSON.parse(atob(s.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(Ke.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Cc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:o}=s;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ke.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([Uc],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class Vc{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=is.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Un extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Bc extends Un{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class fn extends Un{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Hc=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ia=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>as(()=>Promise.resolve().then(()=>us),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Gc=()=>Hc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield as(()=>Promise.resolve().then(()=>us),void 0)).Response:Response}),pn=t=>{if(Array.isArray(t))return t.map(s=>pn(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=pn(r)}),e};var Ht=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const qr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qc=(t,e,s)=>Ht(void 0,void 0,void 0,function*(){const r=yield Gc();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new Bc(qr(n),t.status||500))}).catch(n=>{e(new fn(qr(n),n))}):e(new fn(qr(t),t))}),Kc=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),s))};function Us(t,e,s,r,n,i){return Ht(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,Kc(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>qc(l,a,r))})})}function dr(t,e,s,r){return Ht(this,void 0,void 0,function*(){return Us(t,"GET",e,s,r)})}function Tt(t,e,s,r,n){return Ht(this,void 0,void 0,function*(){return Us(t,"POST",e,r,n,s)})}function Jc(t,e,s,r,n){return Ht(this,void 0,void 0,function*(){return Us(t,"PUT",e,r,n,s)})}function Wc(t,e,s,r){return Ht(this,void 0,void 0,function*(){return Us(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function oa(t,e,s,r,n){return Ht(this,void 0,void 0,function*(){return Us(t,"DELETE",e,r,n,s)})}var Oe=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const zc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ei={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yc{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=ia(n)}uploadOrUpdate(e,s,r,n){return Oe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ei),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Ei.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield Tt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Un("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}update(e,s,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}copy(e,s,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return Oe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Tt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Oe(this,void 0,void 0,function*(){try{const n=yield Tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}download(e,s){return Oe(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield dr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}info(e){return Oe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield dr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:pn(r),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}exists(e){return Oe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Wc(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pe(r)&&r instanceof fn){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}list(e,s,r){return Oe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},zc),s),{prefix:e||""});return{data:yield Tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Qc="2.7.1",Xc={"X-Client-Info":`storage-js/${Qc}`};var Kt=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class Zc{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Xc),s),this.fetch=ia(r)}listBuckets(){return Kt(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pe(e))return{data:null,error:e};throw e}})}getBucket(e){return Kt(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Kt(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Kt(this,void 0,void 0,function*(){try{return{data:yield Jc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Kt(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Kt(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}}class ed extends Zc{constructor(e,s={},r){super(e,s,r)}from(e){return new Yc(this.url,this.headers,e,this.fetch)}}const td="2.49.4";let ys="";typeof Deno<"u"?ys="deno":typeof document<"u"?ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ys="react-native":ys="node";const sd={"X-Client-Info":`supabase-js-${ys}/${td}`},rd={headers:sd},nd={schema:"public"},id={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},od={};var ad=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ld=t=>{let e;return t?e=t:typeof fetch>"u"?e=Go:e=fetch,(...s)=>e(...s)},ud=()=>typeof Headers>"u"?qo:Headers,cd=(t,e,s)=>{const r=ld(s),n=ud();return(i,o)=>ad(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var dd=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function hd(t){return t.replace(/\/$/,"")}function fd(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},c),i),accessToken:()=>dd(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const aa="2.69.1",Yt=30*1e3,gn=3,Kr=gn*Yt,pd="http://localhost:9999",gd="supabase.auth.token",vd={"X-Client-Info":`gotrue-js/${aa}`},vn="X-Supabase-Api-Version",la={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},md=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_d=6e5;class Nn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function B(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yd extends Nn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function bd(t){return B(t)&&t.name==="AuthApiError"}class ua extends Nn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ot extends Nn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class yt extends Ot{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wd(t){return B(t)&&t.name==="AuthSessionMissingError"}class Jr extends Ot{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Js extends Ot{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ws extends Ot{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sd(t){return B(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ri extends Ot{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mn extends Ot{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Wr(t){return B(t)&&t.name==="AuthRetryableFetchError"}class Pi extends Ot{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Rs extends Ot{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Oi=` 	
\r=`.split(""),Td=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Oi.length;e+=1)t[Oi[e].charCodeAt(0)]=-2;for(let e=0;e<Ci.length;e+=1)t[Ci[e].charCodeAt(0)]=e;return t})();function ca(t,e,s){const r=Td[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ai(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Ed(o,r,s)};for(let o=0;o<t.length;o+=1)ca(t.charCodeAt(o),n,i);return e.join("")}function kd(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function xd(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}kd(r,e)}}function Ed(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Rd(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)ca(t.charCodeAt(n),s,r);return new Uint8Array(e)}function Pd(t){const e=[];return xd(t,s=>e.push(s)),new Uint8Array(e)}function Cd(t){return Math.round(Date.now()/1e3)+t}function Od(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Xe=()=>typeof window<"u"&&typeof document<"u",It={tested:!1,writable:!1},Ps=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(It.tested)return It.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),It.tested=!0,It.writable=!0}catch{It.tested=!0,It.writable=!1}return It.writable};function Ad(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const da=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>as(()=>Promise.resolve().then(()=>us),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},jd=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ha=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},zs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ys=async(t,e)=>{await t.removeItem(e)};class Cr{constructor(){this.promise=new Cr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Cr.promiseConstructor=Promise;function zr(t){const e=t.split(".");if(e.length!==3)throw new Rs("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!md.test(e[r]))throw new Rs("JWT not in base64url format");return{header:JSON.parse(Ai(e[0])),payload:JSON.parse(Ai(e[1])),signature:Rd(e[2]),raw:{header:e[0],payload:e[1]}}}async function $d(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Id(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Md(t){return("0"+t.toString(16)).substr(-2)}function Fd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Md).join("")}async function Ld(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Dd(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Ld(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jt(t,e,s=!1){const r=Fd();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await ha(t,`${e}-code-verifier`,n);const i=await Dd(r);return[i,r===i?"plain":"s256"]}const Ud=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nd(t){const e=t.headers.get(vn);if(!e||!e.match(Ud))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Vd(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Bd(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Hd=globalThis&&globalThis.__rest||function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Ft=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gd=[502,503,504];async function ji(t){var e;if(!jd(t))throw new mn(Ft(t),0);if(Gd.includes(t.status))throw new mn(Ft(t),t.status);let s;try{s=await t.json()}catch(i){throw new ua(Ft(i),i)}let r;const n=Nd(t);if(n&&n.getTime()>=la["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Pi(Ft(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new yt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Pi(Ft(s),t.status,s.weak_password.reasons);throw new yd(Ft(s),t.status||500,r)}const qd=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function q(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[vn]||(i[vn]=la["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Kd(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Kd(t,e,s,r,n,i){const o=qd(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new mn(Ft(l),0)}if(a.ok||await ji(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ji(l)}}function bt(t){var e;let s=null;Yd(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Cd(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function $i(t){const e=bt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function kt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Jd(t){return{data:t,error:null}}function Wd(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Hd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function zd(t){return t}function Yd(t){return t.access_token&&t.refresh_token&&t.expires_in}var Qd=globalThis&&globalThis.__rest||function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class Xd{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=da(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:kt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Qd(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Wd,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(B(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:kt})}catch(s){if(B(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:zd});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return b.length>0&&(b.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(E.split(";")[1].split("=")[1]);c[`${$}Page`]=C}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(B(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:kt})}catch(s){if(B(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:kt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:kt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(B(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}}}const Zd={getItem:t=>Ps()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ps()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ps()&&globalThis.localStorage.removeItem(t)}};function Ii(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function eh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wt={debug:!!(globalThis&&Ps()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fa extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class th extends fa{}async function sh(t,e,s){Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new th(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Wt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}eh();const rh={url:pd,storageKey:gd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mi(t,e,s){return await s()}class Is{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&Xe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},rh),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Xd({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=da(n.fetch),this.lock=n.lock||Mi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Xe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=sh:this.lock=Mi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ps()?this.storage=Zd:(this.memoryStorage={},this.storage=Ii(this.memoryStorage)):(this.memoryStorage={},this.storage=Ii(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${aa}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Ad(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Xe()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Sd(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return B(s)?{error:s}:{error:new ua("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:bt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:u,password:f,options:m}=e;let b=null,E=null;this.flowType==="pkce"&&([b,E]=await Jt(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:b,code_challenge_method:E},xform:bt})}else if("phone"in e){const{phone:u,password:f,options:m}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:bt})}else throw new Js("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$i})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$i})}else throw new Js("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await zs(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:bt});if(await Ys(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Jr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(B(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:bt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Jr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Jt(this.storage,this.storageKey));const{error:f}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Js("You must provide either an email or phone number.")}catch(a){if(B(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:bt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(B(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jt(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Jd})}catch(i){if(B(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new yt;const{error:n}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await q(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await q(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Js("You must provide either an email or phone number and a type")}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Kr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:kt}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:kt})})}catch(s){if(B(s))return wd(s)&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new yt;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Jt(this.storage,this.storageKey));const{data:c,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:kt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new yt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=zr(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(B(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new yt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Xe())throw new Ws("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ws(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ri("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ws("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ri("No code detected.");const{data:N,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Ws("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let m=u+f;l&&(m=parseInt(l));const b=m-u;b*1e3<=Yt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${f}s`);const E=m-f;u-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,m,u):u-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,m,u);const{data:C,error:$}=await this._getUser(i);if($)throw $;const I={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:I,redirectType:e.type},error:null}}catch(r){if(B(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await zs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(bd(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Od(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Jt(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(B(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,c,u;const{data:f,error:m}=i;if(m)throw m;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",b,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Xe()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(B(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Id(async n=>(n>0&&await $d(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Wr(i)&&Date.now()+o-r<Yt})}catch(r){if(this._debug(s,"error",r),B(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Xe()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await zs(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Kr;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${Kr}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Wr(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Cr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new yt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),B(i)){const o={session:null,error:i};return Wr(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ha(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ys(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Yt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Yt}ms, refresh threshold is ${gn} ticks`),n<=gn&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fa)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(B(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(B(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=zr(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+_d>Date.now()))return r;const{data:n,error:i}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Rs("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),r=n.keys.find(o=>o.kid===e),!r)throw new Rs("No matching signing key found in JWKS");return r}async getClaims(e,s={keys:[]}){try{let r=e;if(!r){const{data:b,error:E}=await this.getSession();if(E||!b.session)return{data:null,error:E};r=b.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=zr(r);if(Vd(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:i,header:n,signature:o},error:null}}const c=Bd(n.alg),u=await this.fetchJwk(n.kid,s),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,Pd(`${a}.${l}`)))throw new Rs("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}}Is.nextInstanceID=0;const nh=Is;class ih extends nh{constructor(e){super(e)}}var oh=globalThis&&globalThis.__awaiter||function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class ah{constructor(e,s,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=hd(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:nd,realtime:od,auth:Object.assign(Object.assign({},id),{storageKey:l}),global:rd},u=fd(r??{},c);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=cd(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new xc(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new ec(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ed(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return oh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,lock:a,debug:l},c,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ih({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Nc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lh=(t,e,s)=>new ah(t,e,s),me=[];for(let t=0;t<256;++t)me.push((t+256).toString(16).slice(1));function uh(t,e=0){return(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase()}let Yr;const ch=new Uint8Array(16);function dh(){if(!Yr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yr=crypto.getRandomValues.bind(crypto)}return Yr(ch)}const hh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fi={randomUUID:hh};function fh(t,e,s){var n;if(Fi.randomUUID&&!e&&!t)return Fi.randomUUID();t=t||{};const r=t.random??((n=t.rng)==null?void 0:n.call(t))??dh();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(s=s||0,s<0||s+16>e.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[s+i]=r[i];return e}return uh(r)}const ph=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},gh={key:0,class:"storage-mode-overlay"},vh={class:"left-column"},mh={border:"1",cellpadding:"5",cellspacing:"0"},_h={style:{display:"flex",gap:"5px","align-items":"center"}},yh={key:0,label:"My Presets"},bh=["value"],wh={key:0,class:"preset-menu"},Sh={class:"preset-actions"},Th={key:2,class:"auto-save-info"},kh=["value"],xh={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"10px","margin-top":"15px"}},Eh={border:"1",cellpadding:"5",cellspacing:"0"},Rh=["onUpdate:modelValue"],Ph=["onUpdate:modelValue"],Ch=["onUpdate:modelValue"],Oh=["onUpdate:modelValue"],Ah=["onClick"],jh={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"10px","margin-top":"15px"}},$h=["title"],Ih={key:0,border:"1",cellpadding:"5",cellspacing:"0"},Mh={border:"1",cellpadding:"5",cellspacing:"0"},Fh=["value"],Lh={colspan:"2",title:"Calculated as: Visitor-to-Install  Install-to-Sub  100"},Dh={class:"right-column"},Uh={key:0,class:"online-indicator"},Nh={class:"share-link"},Vh=["value"],Bh=["title"],Hh={class:"table-container"},Gh={border:"1",cellpadding:"5",cellspacing:"0"},qh=["colspan"],Kh={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Jh=["title"],Wh={key:0,title:"Growth rate applied for this month"},zh={key:1,title:"Conversion rate applied for this month (hover over values below to see detailed breakdown of Visitor-to-Install and Install-to-Sub rates)"},Yh={key:2,title:"Churn rate applied for this month"},Qh=["title"],Xh={key:0},Zh=["title"],ef=["title"],tf=["title"],sf={key:2},rf={title:"Previous month + New subscribers - Churn"},nf=["title"],of={class:"summary-row"},af={title:"Sum of all projected visitors across 12 months"},lf={key:0},uf=["title"],cf={key:1},df={title:"Sum of all churned customers across 12 months"},hf={key:2},ff={title:"Projected MRR at the end of the 12-month period"},pf={border:"1",cellpadding:"5",cellspacing:"0"},Li="saas-projection-user-presets",gf={__name:"ExcelLikeApp",setup(t){const r=lh("https://afsprmpjewlmnhfaofyc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFmc3BybXBqZXdsbW5oZmFvZnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4MDcwMDUsImV4cCI6MjA2MDM4MzAwNX0.hXR1idbE2SgYOUVIg3TP57NfWEmDoETT4B29CTMm62U"),n=re(15802),i=re(1e3),o=re(-2.66),a=re(2.7),l=re(24),c=re("$"),u=re(12),f=re(!1),m=re(!1),b=re(new Date().getFullYear()),E=re("monokai"),C=re(new Date().getMonth()),$=re(1),I=re(1),N=re(1.05),U=re(1.02),O=re([{name:"Starter",customers:30,price:49,churnRate:2.5},{name:"Essentials",customers:7,price:99,churnRate:1.8},{name:"Scale",customers:5,price:199,churnRate:1.5},{name:"Prime",customers:2,price:299,churnRate:1}]),J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ke=re(!1),z=re([]),W=re("levelsio"),ht={levelsio:{mrrGoal:5e4,initialVisitors:5e3,averageVisitorGrowthRate:30,visitorToInstallRate:2,installToSubRate:25,visitorGrowthFactor:1.2,churnRateFactor:.8,visitorToInstallFactor:1.1,installToSubFactor:1.1,plans:[{name:"Starter",customers:80,price:29,churnRate:5},{name:"Solo",customers:40,price:79,churnRate:2.5},{name:"Team",customers:10,price:199,churnRate:1.5}]},"vc-startup":{mrrGoal:1e5,initialVisitors:1e4,averageVisitorGrowthRate:15,visitorToInstallRate:3.5,installToSubRate:15,visitorGrowthFactor:1.1,churnRateFactor:.9,visitorToInstallFactor:1.05,installToSubFactor:1.05,plans:[{name:"Basic",customers:65,price:49,churnRate:5},{name:"Pro",customers:30,price:99,churnRate:3.5},{name:"Enterprise",customers:12,price:299,churnRate:2},{name:"Enterprise+",customers:3,price:999,churnRate:1}]}},ce=re(!1),qe=re(!0),Ue=re(""),At=re(!1),ft=re(!1),Gt=re(null),ge=_t(()=>!ce.value||!Ue.value?"":`${window.location.origin}${window.location.pathname}?id=${Ue.value}`);function oe(){Gt.value&&(Gt.value.select(),document.execCommand("copy"),ft.value=!0,setTimeout(()=>{ft.value=!1},2e3))}async function Z(){At.value=!0;try{const d=new URLSearchParams(window.location.search).get("id");d?(Ue.value=d,await it(d),h()):(Ue.value=fh(),await Ne(),window.history.pushState({},"",`?id=${Ue.value}`)),ce.value=!0,qe.value=!1}catch(v){console.error("Error setting up online mode:",v),alert("There was an error connecting to the online service. Please try again or use offline mode.")}finally{At.value=!1}}function nt(){ce.value=!1,qe.value=!1,window.location.search&&window.history.pushState({},"",window.location.pathname),ya(),hs()}async function Ne(){if(!ce.value||!Ue.value)return;const v={id:Ue.value,selectedPreset:W.value,userPresets:z.value,appState:{mrrGoal:n.value,initialVisitors:i.value,averageVisitorGrowthRate:o.value,visitorToInstallRate:a.value,installToSubRate:l.value,selectedCurrency:c.value,maxProjectionMonths:u.value,showRateDetails:f.value,showPlanDistribution:m.value,currentMonth:C.value,visitorGrowthFactor:$.value,churnRateFactor:I.value,visitorToInstallFactor:N.value,installToSubFactor:U.value,breakdownPlans:O.value,selectedTheme:E.value},updated_at:new Date};try{const{error:d}=await r.from("saas_projections").upsert(v,{onConflict:"id",returning:"minimal"});if(d)throw d}catch(d){console.error("Error saving to Supabase:",d)}}async function it(v){const{data:d,error:_}=await r.from("saas_projections").select("*").eq("id",v).single();if(_)throw _;if(d&&(d.userPresets&&(z.value=d.userPresets),d.selectedPreset&&(W.value=d.selectedPreset),d.appState)){const A=d.appState;A.mrrGoal!==void 0&&(n.value=A.mrrGoal),A.initialVisitors!==void 0&&(i.value=A.initialVisitors),A.averageVisitorGrowthRate!==void 0&&(o.value=A.averageVisitorGrowthRate),A.visitorToInstallRate!==void 0&&(a.value=A.visitorToInstallRate),A.installToSubRate!==void 0&&(l.value=A.installToSubRate),A.selectedCurrency!==void 0&&(c.value=A.selectedCurrency),A.maxProjectionMonths!==void 0&&(u.value=A.maxProjectionMonths),A.showRateDetails!==void 0&&(f.value=A.showRateDetails),A.showPlanDistribution!==void 0&&(m.value=A.showPlanDistribution),A.currentMonth!==void 0&&(C.value=A.currentMonth),A.visitorGrowthFactor!==void 0&&($.value=A.visitorGrowthFactor),A.churnRateFactor!==void 0&&(I.value=A.churnRateFactor),A.visitorToInstallFactor!==void 0&&(N.value=A.visitorToInstallFactor),A.installToSubFactor!==void 0&&(U.value=A.installToSubFactor),A.breakdownPlans&&Array.isArray(A.breakdownPlans)&&(O.value=A.breakdownPlans),A.selectedTheme!==void 0&&(E.value=A.selectedTheme),Ye(E.value)}}function Ve(){new URLSearchParams(window.location.search).get("id")?Z():qe.value=!0}_o(()=>{Ve()});function pt(){ce.value?Ne():_a()}const Or=["default","hacker","terminal","amber","monokai"];function Ar(){document.documentElement.classList.remove("theme-hacker"),document.documentElement.classList.remove("theme-terminal"),document.documentElement.classList.remove("theme-amber"),document.documentElement.classList.remove("theme-monokai"),document.documentElement.classList.remove("light-mode"),document.documentElement.classList.remove("dark-mode")}function Ye(v){Or.includes(v)||(console.warn(`Invalid theme: ${v}. Falling back to monokai.`),v="monokai"),Ar(),v==="hacker"?document.documentElement.classList.add("theme-hacker"):v==="terminal"?document.documentElement.classList.add("theme-terminal"):v==="amber"?document.documentElement.classList.add("theme-amber"):v==="monokai"?document.documentElement.classList.add("theme-monokai"):v==="default"&&document.documentElement.classList.add("light-mode"),localStorage.setItem("selectedTheme",v)}const Be=_t(()=>z.value.some(v=>v.id===W.value));function ds(){const v=prompt("Enter a name for this preset (changes will auto-save):");if(!v||v.trim()==="")return;const d="user-preset-"+Date.now(),_={id:d,name:v,mrrGoal:n.value,initialVisitors:i.value,averageVisitorGrowthRate:o.value,visitorToInstallRate:a.value,installToSubRate:l.value,visitorGrowthFactor:$.value,churnRateFactor:I.value,visitorToInstallFactor:N.value,installToSubFactor:U.value,plans:JSON.parse(JSON.stringify(O.value))};z.value.push(_),ce.value?Ne():vt(),W.value=d,ke.value=!1}function Ns(){if(!Be.value)return;const v=z.value.findIndex(d=>d.id===W.value);v!==-1&&confirm(`Update preset "${z.value[v].name}" with current values?`)&&(z.value[v]={...z.value[v],mrrGoal:n.value,initialVisitors:i.value,averageVisitorGrowthRate:o.value,visitorToInstallRate:a.value,installToSubRate:l.value,visitorGrowthFactor:$.value,churnRateFactor:I.value,visitorToInstallFactor:N.value,installToSubFactor:U.value,plans:JSON.parse(JSON.stringify(O.value))},ce.value?Ne():vt(),ke.value=!1)}function gt(){if(!Be.value)return;const v=z.value.findIndex(_=>_.id===W.value);if(v===-1)return;const d=z.value[v].name;confirm(`Delete preset "${d}"? This cannot be undone.`)&&(z.value.splice(v,1),ce.value?Ne():vt(),W.value="levelsio",ke.value=!1)}function vt(){localStorage.setItem(Li,JSON.stringify(z.value))}function hs(){const v=localStorage.getItem(Li);if(v)try{z.value=JSON.parse(v)}catch(d){console.error("Error loading user presets:",d)}}function h(){let v;if(ht[W.value])v=ht[W.value];else if(Be.value){const d=z.value.find(_=>_.id===W.value);d&&(v=d)}(!v||Object.keys(v).length===0)&&(W.value="levelsio",v=ht.levelsio),v.mrrGoal!==void 0&&(n.value=v.mrrGoal),v.initialVisitors!==void 0&&(i.value=v.initialVisitors),v.averageVisitorGrowthRate!==void 0&&(o.value=v.averageVisitorGrowthRate),v.visitorToInstallRate!==void 0&&(a.value=v.visitorToInstallRate),v.installToSubRate!==void 0&&(l.value=v.installToSubRate),v.visitorGrowthFactor!==void 0&&($.value=v.visitorGrowthFactor),v.churnRateFactor!==void 0&&(I.value=v.churnRateFactor),v.visitorToInstallFactor!==void 0&&(N.value=v.visitorToInstallFactor),v.installToSubFactor!==void 0&&(U.value=v.installToSubFactor),v.plans&&(O.value=JSON.parse(JSON.stringify(v.plans))),Ye(E.value),pt()}const g=fu();ss(()=>E.value,v=>{g&&g.appContext.config.globalProperties&&(g.appContext.config.globalProperties.selectedTheme=v),Ye(v),pt()}),ss(()=>W.value,v=>{ce.value&&(h(),Ne())}),ss([n,i,o,a,l,c,u,f,m,C,$,I,N,U,O],()=>{if(pt(),Be.value){const v=z.value.findIndex(d=>d.id===W.value);v!==-1&&(z.value[v]={...z.value[v],mrrGoal:n.value,initialVisitors:i.value,averageVisitorGrowthRate:o.value,visitorToInstallRate:a.value,installToSubRate:l.value,visitorGrowthFactor:$.value,churnRateFactor:I.value,visitorToInstallFactor:N.value,installToSubFactor:U.value,plans:JSON.parse(JSON.stringify(O.value))},ce.value?Ne():vt())}},{deep:!0});function y(){O.value.push({name:"New Plan",customers:0,price:0,churnRate:2}),pt()}function k(v){O.value.splice(v,1),pt()}yo(()=>{E.value||(E.value="hacker",Ye("hacker"))});const w=_t(()=>O.value.reduce((v,d)=>v+d.price*d.customers,0)),S=_t(()=>{const v=O.value.reduce((d,_)=>d+_.customers,0);return v===0?0:w.value/v});function R(v,d=0){const _=(b.value+d)%100;return`${J[v]} '${_}`}const P=_t(()=>{const v=[];for(let d=0;d<u.value;d++){const _=(C.value+d+1)%12,A=Math.floor((C.value+d+1)/12);v.push({name:R(_,A),index:_,projectionIndex:d,yearOffset:A})}return v}),x=_t(()=>(a.value*l.value/100).toFixed(2)),T=_t(()=>{const v=O.value.map(_=>_.churnRate).filter(_=>_!==void 0);if(v.length===0)return 0;v.sort((_,A)=>_-A);const d=Math.floor(v.length/2);return v.length%2===0?((v[d-1]+v[d])/2).toFixed(2):v[d].toFixed(2)});function F(v){const d=parseFloat(o.value)||0;if(v===0)return d;if(d<0&&$.value>1){const _=Math.min($.value*10,100);let A;$.value>5?A=$.value*.4:A=$.value*.3;const ye=Math.abs(d)*A*.1*v;let fs=d+ye;return Math.min(fs,_)}else if(d<0&&$.value<1){const _=Math.abs(d)*(1-$.value)*.2;let A=d-_*v;return Math.max(A,-30)}else if(d>0){let _=d;for(let A=0;A<v;A++)_*=$.value;return Math.min(_,100)}return d}function j(v){let d=i.value;for(let _=0;_<=v;_++){const A=F(_);d*=1+A/100,d=Math.max(d,1)}return Math.round(d).toFixed(0)}function M(v){let d=a.value;for(let _=0;_<v;_++)d*=N.value;return Math.min(d,100)}function L(v){let d=l.value;for(let _=0;_<v;_++)d*=U.value;return Math.min(d,100)}function G(v){const d=M(v),_=L(v);return d*_/100}function Y(v){let d=parseFloat(T.value);if(I.value===1)return d;if(I.value<0){const _=Math.min(Math.abs(I.value)*.1,.5);for(let A=0;A<v;A++)d=d*(1-_);return Math.max(d,0)}if(I.value<1){let _=1-I.value;for(let A=0;A<v;A++)d=d*(1-_);return Math.max(d,0)}for(let _=0;_<v;_++)d*=I.value;return Math.min(d,25)}function K(v){const d=parseInt(j(v));return Math.floor(d*(G(v)/100))}function he(v){if(v===0){const d=O.value.reduce((_,A)=>_+A.customers,0);return Math.floor(d*(Y(0)/100))}else{const d=le(v-1);return Math.floor(d*(Y(v)/100))}}function le(v){if(v<0)return O.value.reduce((ye,fs)=>ye+fs.customers,0);if(v===0){const ye=O.value.reduce((wa,Sa)=>wa+Sa.customers,0),fs=he(0),ba=K(0);return ye-fs+ba}const d=le(v-1),_=he(v),A=K(v);return d-_+A}function Pe(v){return(le(v)*S.value).toFixed(2)}function xe(){let v=0;for(let d=0;d<u.value;d++)v+=parseInt(j(d));return v.toLocaleString()}function mt(){let v=0;for(let d=0;d<u.value;d++)v+=K(d);return v}function Vs(){let v=0;for(let d=0;d<u.value;d++)v+=he(d);return v}function de(){return Pe(u.value-1)}function $e(){return parseFloat(de())>=n.value}function Bs(){const d=parseFloat(de())-n.value,_=d>=0?"+":"";return`${_}${c.value}${d.toFixed(2)} (${_}${(d/n.value*100).toFixed(1)}%)`}function Bn(v){const d=O.value.reduce((_,A)=>_+A.customers,0);return d===0?0:(v.customers/d*100).toFixed(1)}function pa(v){return w.value===0?0:(v.price*v.customers/w.value*100).toFixed(1)}function ga(){const v=mt();let d=`Total subscribers gained: ${v}

Plan distribution:`;return O.value.forEach(_=>{const A=parseFloat(Bn(_)),ye=Math.round(A/100*v);d+=`
${_.name}: ${ye} (${A}%)`}),d}function va(){return(w.value*12).toFixed(2)}function jr(){return(parseFloat(de())*12).toFixed(2)}function $r(){return(n.value*12).toFixed(2)}function Hn(){return parseFloat(jr())>=parseFloat($r())}function ma(){const v=parseFloat(jr()),d=parseFloat($r()),_=v-d,A=_>=0?"+":"";return`${A}${c.value}${_.toFixed(2)} (${A}${(_/d*100).toFixed(1)}%)`}const _a=()=>{const v={selectedPreset:W.value,mrrGoal:n.value,initialVisitors:i.value,averageVisitorGrowthRate:o.value,visitorToInstallRate:a.value,installToSubRate:l.value,selectedCurrency:c.value,maxProjectionMonths:u.value,showRateDetails:f.value,showPlanDistribution:m.value,currentMonth:C.value,visitorGrowthFactor:$.value,churnRateFactor:I.value,visitorToInstallFactor:N.value,installToSubFactor:U.value,breakdownPlans:O.value};localStorage.setItem("saasProjectorState",JSON.stringify(v))},ya=()=>{const v=localStorage.getItem("saasProjectorState");if(v)try{const d=JSON.parse(v);d.selectedPreset!==void 0&&(W.value=d.selectedPreset),d.mrrGoal!==void 0&&(n.value=d.mrrGoal),d.initialVisitors!==void 0&&(i.value=d.initialVisitors),d.averageVisitorGrowthRate!==void 0&&(o.value=d.averageVisitorGrowthRate),d.visitorToInstallRate!==void 0&&(a.value=d.visitorToInstallRate),d.installToSubRate!==void 0&&(l.value=d.installToSubRate),d.selectedCurrency!==void 0&&(c.value=d.selectedCurrency),d.maxProjectionMonths!==void 0&&(u.value=d.maxProjectionMonths),d.showRateDetails!==void 0&&(f.value=d.showRateDetails),d.showPlanDistribution!==void 0&&(m.value=d.showPlanDistribution),d.currentMonth!==void 0&&(C.value=d.currentMonth),d.visitorGrowthFactor!==void 0&&($.value=d.visitorGrowthFactor),d.churnRateFactor!==void 0&&(I.value=d.churnRateFactor),d.visitorToInstallFactor!==void 0&&(N.value=d.visitorToInstallFactor),d.installToSubFactor!==void 0&&(U.value=d.installToSubFactor),d.breakdownPlans&&Array.isArray(d.breakdownPlans)&&(O.value=d.breakdownPlans),W.value!=="levelsio"&&W.value!=="vc-startup"&&!z.value.some(_=>_.id===W.value)&&(W.value="levelsio"),console.log("Loaded saved state with preset:",W.value)}catch(d){console.error("Error loading saved state:",d)}};return(v,d)=>(ee(),te("div",{class:et([{"theme-hacker":E.value==="hacker","theme-terminal":E.value==="terminal","theme-amber":E.value==="amber","theme-monokai":E.value==="monokai"},"app-container"])},[qe.value?(ee(),te("div",gh,[p("div",{class:"storage-mode-dialog"},[d[19]||(d[19]=p("h2",null,"Choose Storage Mode",-1)),d[20]||(d[20]=p("p",null,"How would you like to save your presets?",-1)),p("div",{class:"storage-mode-buttons"},[p("button",{onClick:Z,class:"mode-btn online-btn"},d[17]||(d[17]=[p("span",{class:"icon"},"",-1),p("span",{class:"label"},"Go Online",-1),p("span",{class:"description"},"Save in cloud, shareable via URL",-1)])),p("button",{onClick:nt,class:"mode-btn offline-btn"},d[18]||(d[18]=[p("span",{class:"icon"},"",-1),p("span",{class:"label"},"Keep Offline",-1),p("span",{class:"description"},"Save locally in this browser only",-1)]))])])])):ve("",!0),p("div",{class:et(["two-column-layout",{blurred:qe.value}])},[p("div",vh,[d[45]||(d[45]=p("h3",{id:"general-settings"},"General Settings",-1)),p("table",mh,[d[33]||(d[33]=p("thead",null,[p("tr",null,[p("th",{colspan:"2"},"Basic Settings")])],-1)),p("tbody",null,[p("tr",null,[d[24]||(d[24]=p("td",null,"Preset Configuration",-1)),p("td",null,[p("div",_h,[fe(p("select",{"onUpdate:modelValue":d[0]||(d[0]=_=>W.value=_),onChange:h,style:{"flex-grow":"1"}},[d[21]||(d[21]=p("option",{value:"levelsio"},"Levelsio Solo",-1)),d[22]||(d[22]=p("option",{value:"vc-startup"},"VC-Backed Startup",-1)),z.value.length>0?(ee(),te("optgroup",yh,[(ee(!0),te(Ae,null,gs(z.value,_=>(ee(),te("option",{key:_.id,value:_.id},V(_.name)+" "+V(W.value===_.id?"(Auto-Save)":""),9,bh))),128))])):ve("",!0)],544),[[Ks,W.value]]),p("button",{onClick:d[1]||(d[1]=_=>ke.value=!ke.value),class:"small-btn",title:"Manage presets"},"")]),ke.value?(ee(),te("div",wh,[p("div",Sh,[p("button",{onClick:ds,class:"action-btn"},"Save Current as New Preset"),Be.value?(ee(),te("button",{key:0,onClick:Ns,class:"action-btn",disabled:"",title:"Preset is automatically updated as you make changes"},"Update Selected Preset")):ve("",!0),Be.value?(ee(),te("button",{key:1,onClick:gt,class:"action-btn delete-btn"},"Delete Selected")):ve("",!0),Be.value?(ee(),te("div",Th,d[23]||(d[23]=[p("small",null,"Changes are automatically saved to this preset",-1)]))):ve("",!0)])])):ve("",!0)])]),p("tr",null,[d[26]||(d[26]=p("td",null,"Currency",-1)),p("td",null,[fe(p("select",{"onUpdate:modelValue":d[2]||(d[2]=_=>c.value=_)},d[25]||(d[25]=[p("option",{value:"$"},"$ (USD)",-1),p("option",{value:""}," (EUR)",-1),p("option",{value:""}," (GBP)",-1)]),512),[[Ks,c.value]])])]),p("tr",null,[d[28]||(d[28]=p("td",null,"Theme",-1)),p("td",null,[fe(p("select",{"onUpdate:modelValue":d[3]||(d[3]=_=>E.value=_)},d[27]||(d[27]=[lu('<option value="default" data-v-b18d4c11>Default</option><option value="hacker" data-v-b18d4c11>Hacker</option><option value="terminal" data-v-b18d4c11>Terminal</option><option value="amber" data-v-b18d4c11>Amber</option><option value="monokai" data-v-b18d4c11>Monokai</option>',5)]),512),[[Ks,E.value]])])]),p("tr",null,[d[29]||(d[29]=p("td",null,"MRR Goal",-1)),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[4]||(d[4]=_=>n.value=_),title:"Your target Monthly Recurring Revenue goal"},null,512),[[Ce,n.value,void 0,{number:!0}]])])]),p("tr",null,[d[30]||(d[30]=p("td",null,"Current Month",-1)),p("td",null,[fe(p("select",{"onUpdate:modelValue":d[5]||(d[5]=_=>C.value=_),title:"Current month (projection will start from next month)"},[(ee(),te(Ae,null,gs(J,(_,A)=>p("option",{key:A,value:A},V(_)+" '"+V(b.value%100),9,kh)),64))],512),[[Ks,C.value]])])]),p("tr",null,[d[31]||(d[31]=p("td",null,"Current Month Visitors",-1)),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[6]||(d[6]=_=>i.value=_),title:"Current month's number of visitors"},null,512),[[Ce,i.value,void 0,{number:!0}]])])]),p("tr",null,[d[32]||(d[32]=p("td",null,"Projection Months",-1)),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[7]||(d[7]=_=>u.value=_),min:"1",max:"60",title:"Number of months to include in the projection"},null,512),[[Ce,u.value,void 0,{number:!0}]])])])])]),p("div",xh,[d[34]||(d[34]=p("h3",{style:{margin:"0"}},"Plan Information",-1)),p("a",{href:"#",onClick:yi(y,["prevent"]),style:{"text-decoration":"underline",color:"blue","font-size":"14px"}},"+ Add Plan")]),p("table",Eh,[d[35]||(d[35]=p("thead",null,[p("tr",null,[p("th",null,"Plan"),p("th",null,"Cust."),p("th",null,"Price"),p("th",null,"Churn %"),p("th",null,"Remove")])],-1)),p("tbody",null,[(ee(!0),te(Ae,null,gs(O.value,(_,A)=>(ee(),te("tr",{key:A},[p("td",null,[fe(p("input",{type:"text","onUpdate:modelValue":ye=>_.name=ye,class:"plan-name-input"},null,8,Rh),[[Ce,_.name]])]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":ye=>_.customers=ye,title:"Current number of customers subscribed to this plan",class:"small-input"},null,8,Ph),[[Ce,_.customers,void 0,{number:!0}]])]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":ye=>_.price=ye,title:"Monthly price of this subscription plan",class:"small-input"},null,8,Ch),[[Ce,_.price,void 0,{number:!0}]])]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":ye=>_.churnRate=ye,step:"0.01",title:"Monthly churn rate percentage for this plan",class:"small-input"},null,8,Oh),[[Ce,_.churnRate,void 0,{number:!0}]])]),p("td",null,[p("a",{href:"#",onClick:yi(ye=>k(A),["prevent"]),style:{"text-decoration":"underline",color:"blue","font-size":"12px"}},"remove",8,Ah)])]))),128))])]),p("div",jh,[d[37]||(d[37]=p("h3",{style:{margin:"0"}},"Plan Distribution",-1)),p("button",{onClick:d[8]||(d[8]=_=>m.value=!m.value),class:et(["toggle-btn",{expanded:m.value}]),title:m.value?"Hide distribution details":"Show distribution details"},d[36]||(d[36]=[rs(" Show distribution details "),p("span",{class:"arrow"},"",-1)]),10,$h)]),m.value?(ee(),te("table",Ih,[d[38]||(d[38]=p("thead",null,[p("tr",null,[p("th",null,"Plan"),p("th",{title:"Percentage of total customers on this plan"},"Customer Dist. (%)"),p("th",{title:"Percentage of total MRR from this plan"},"Revenue Dist. (%)")])],-1)),p("tbody",null,[(ee(!0),te(Ae,null,gs(O.value,(_,A)=>(ee(),te("tr",{key:A},[p("td",null,V(_.name),1),p("td",null,V(Bn(_))+"%",1),p("td",null,V(pa(_))+"%",1)]))),128))])])):ve("",!0),d[46]||(d[46]=p("br",null,null,-1)),p("table",Mh,[d[44]||(d[44]=p("thead",null,[p("tr",null,[p("th",{colspan:"3"},"Growth & Conversion Rates")]),p("tr",null,[p("th",null,"Metric"),p("th",null,"Base (%)"),p("th",null,"Factor")])],-1)),p("tbody",null,[p("tr",null,[d[39]||(d[39]=p("td",null,"Average Visitor Growth Rate",-1)),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[9]||(d[9]=_=>o.value=_),step:"0.01",title:"Month-over-month percentage growth in website visitors"},null,512),[[Ce,o.value,void 0,{number:!0}]])]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[10]||(d[10]=_=>$.value=_),step:"0.01",min:"0.5",max:"20",title:"Growth multiplier (1 = constant)",class:"factor-input"},null,512),[[Ce,$.value,void 0,{number:!0}]])])]),p("tr",null,[d[40]||(d[40]=p("td",null,"Median Churn Rate",-1)),p("td",null,[p("input",{type:"number",value:T.value,disabled:"",title:"Median churn rate calculated from all plan-specific churn rates"},null,8,Fh)]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[11]||(d[11]=_=>I.value=_),step:"0.1",min:"-5",max:"2",title:"Churn rate evolution: 1=constant, <1=gradual reduction, negative=faster reduction, >1=increasing churn (capped at 25%)",class:"factor-input"},null,512),[[Ce,I.value,void 0,{number:!0}]])])]),p("tr",null,[d[41]||(d[41]=p("td",null,"Visitor-to-Install Conversion Rate",-1)),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[12]||(d[12]=_=>a.value=_),step:"0.01",title:"Percentage of website visitors who install the app"},null,512),[[Ce,a.value,void 0,{number:!0}]])]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[13]||(d[13]=_=>N.value=_),step:"0.01",min:"0.5",max:"2",title:"V2I multiplier (1 = constant)",class:"factor-input"},null,512),[[Ce,N.value,void 0,{number:!0}]])])]),p("tr",null,[d[42]||(d[42]=p("td",null,"Install-to-Sub Conversion Rate",-1)),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[14]||(d[14]=_=>l.value=_),step:"0.01",title:"Percentage of app installers who become paid subscribers"},null,512),[[Ce,l.value,void 0,{number:!0}]])]),p("td",null,[fe(p("input",{type:"number","onUpdate:modelValue":d[15]||(d[15]=_=>U.value=_),step:"0.01",min:"0.5",max:"2",title:"I2S multiplier (1 = constant)",class:"factor-input"},null,512),[[Ce,U.value,void 0,{number:!0}]])])]),p("tr",null,[d[43]||(d[43]=p("td",null,"Visitor-to-Sub Conversion Rate",-1)),p("td",Lh,V(x.value)+" (base rate) ",1)])])])]),p("div",Dh,[ce.value?(ee(),te("div",Uh,[d[47]||(d[47]=p("div",{class:"online-badge"},[p("span",{class:"online-dot"}),p("span",null,"Online Mode")],-1)),p("div",Nh,[p("input",{type:"text",readonly:"",value:ge.value,ref_key:"shareLinkInput",ref:Gt},null,8,Vh),p("button",{onClick:oe,class:"copy-btn",title:ft.value?"Copied!":"Copy link"},V(ft.value?"":"Copy"),9,Bh)])])):ve("",!0),d[63]||(d[63]=p("h3",null,"Projection Analysis",-1)),p("div",Hh,[p("table",Gh,[p("thead",null,[p("tr",null,[p("th",{colspan:f.value?9:6},[p("div",Kh,[p("span",null,V(u.value)+"-Month Projection (Starting from "+V(R((C.value+1)%12,Math.floor((C.value+1)/12)))+")",1),p("button",{onClick:d[16]||(d[16]=_=>f.value=!f.value),class:et(["toggle-btn",{expanded:f.value}]),title:f.value?"Hide rate details":"Show rate details"},d[48]||(d[48]=[rs(" Show rate details "),p("span",{class:"arrow"},"",-1)]),10,Jh)])],8,qh)]),p("tr",null,[d[49]||(d[49]=p("th",null,"Month",-1)),d[50]||(d[50]=p("th",{title:"Projected website visitors per month with applied growth rate"},"Visitors",-1)),f.value?(ee(),te("th",Wh,"Growth%")):ve("",!0),d[51]||(d[51]=p("th",{title:"New subscribers gained based on conversion rate applied to monthly visitors"},"Subs+",-1)),f.value?(ee(),te("th",zh,"Conv%")):ve("",!0),d[52]||(d[52]=p("th",{title:"Subscribers lost based on churn rate applied to previous month's customer base"},"Churned",-1)),f.value?(ee(),te("th",Yh,"Churn%")):ve("",!0),d[53]||(d[53]=p("th",{title:"Total customers at end of month: previous month + new subscribers - churn"},"Net Cust.",-1)),d[54]||(d[54]=p("th",{title:"Projected revenue: Net customers  average price per customer"},"MRR",-1))])]),p("tbody",null,[(ee(!0),te(Ae,null,gs(P.value,(_,A)=>(ee(),te("tr",{key:A},[p("td",null,V(_.name),1),p("td",{title:`Calculated with month ${A+1} growth rate: ${((parseFloat(o.value.value)||0)*Math.pow($.value.value,A)).toFixed(2)}%`},V(j(_.projectionIndex)),9,Qh),f.value?(ee(),te("td",Xh,V(typeof F(_.projectionIndex)=="number"?F(_.projectionIndex).toFixed(2):"0.00")+"% ",1)):ve("",!0),p("td",{title:`New subscribers: ${K(_.projectionIndex)}
Conversion rate breakdown:
Visitor-to-Install: ${M(_.projectionIndex).toFixed(2)}%
Install-to-Sub: ${L(_.projectionIndex).toFixed(2)}%
Combined: ${G(_.projectionIndex).toFixed(2)}%`},V(K(_.projectionIndex)),9,Zh),f.value?(ee(),te("td",{key:1,title:`Breakdown:
Visitor-to-Install: ${M(_.projectionIndex).toFixed(2)}%
Install-to-Sub: ${L(_.projectionIndex).toFixed(2)}%
Combined: (${M(_.projectionIndex).toFixed(2)}%  ${L(_.projectionIndex).toFixed(2)}%)  100 = ${G(_.projectionIndex).toFixed(2)}%`},V(G(_.projectionIndex).toFixed(2))+"% ",9,ef)):ve("",!0),p("td",{title:`Calculated as: Previous month customers  ${Y(_.projectionIndex).toFixed(2)}% churn rate`},V(he(_.projectionIndex)),9,tf),f.value?(ee(),te("td",sf,V(Y(_.projectionIndex).toFixed(2))+"% ",1)):ve("",!0),p("td",rf,V(le(_.projectionIndex)),1),p("td",{title:`Net customers  ${c.value}${S.value.toFixed(2)} average price`},V(c.value)+V(Pe(_.projectionIndex)),9,nf)]))),128)),p("tr",of,[d[55]||(d[55]=p("td",null,[p("strong",null,"Total")],-1)),p("td",af,[p("strong",null,V(xe()),1)]),f.value?(ee(),te("td",lf)):ve("",!0),p("td",{title:ga()},[p("strong",null,V(mt()),1)],8,uf),f.value?(ee(),te("td",cf)):ve("",!0),p("td",df,[p("strong",null,V(Vs()),1)]),f.value?(ee(),te("td",hf)):ve("",!0),d[56]||(d[56]=p("td",null,null,-1)),p("td",ff,[p("strong",null,V(c.value)+V(de()),1)])])])])]),p("table",pf,[d[62]||(d[62]=p("thead",null,[p("tr",null,[p("th",{colspan:"2"},"Target Revenue Analysis")])],-1)),p("tbody",null,[p("tr",null,[p("td",null,"Current MRR ("+V(R(C.value))+")",1),p("td",null,V(c.value)+V(w.value),1)]),p("tr",null,[p("td",null,"Projected MRR ("+V(R((C.value+u.value)%12,Math.floor((C.value+u.value)/12)))+")",1),p("td",null,V(c.value)+V(de()),1)]),p("tr",null,[d[57]||(d[57]=p("td",null,"MRR Goal",-1)),p("td",null,V(c.value)+V(n.value),1)]),p("tr",null,[d[58]||(d[58]=p("td",null,"Difference from MRR Goal",-1)),p("td",{class:et({positive:$e(),negative:!$e()})},V(Bs()),3)]),d[61]||(d[61]=p("tr",{class:"separator-row"},[p("td",{colspan:"2"})],-1)),p("tr",null,[p("td",null,"Current ARR ("+V(R(C.value))+")",1),p("td",null,V(c.value)+V(va()),1)]),p("tr",null,[p("td",null,"Projected ARR ("+V(R((C.value+u.value)%12,Math.floor((C.value+u.value)/12)))+")",1),p("td",null,V(c.value)+V(jr()),1)]),p("tr",null,[d[59]||(d[59]=p("td",null,"ARR Goal",-1)),p("td",null,V(c.value)+V($r()),1)]),p("tr",null,[d[60]||(d[60]=p("td",null,"Difference from ARR Goal",-1)),p("td",{class:et({positive:Hn(),negative:!Hn()})},V(ma()),3)])])])])],2)],2))}},vf=ph(gf,[["__scopeId","data-v-b18d4c11"]]);const mf={__name:"App",setup(t){return(e,s)=>(ee(),te("div",{class:et(["app",{"theme-hacker":e.$root&&e.$root.selectedTheme==="hacker","theme-terminal":e.$root&&e.$root.selectedTheme==="terminal","theme-amber":e.$root&&e.$root.selectedTheme==="amber","theme-monokai":e.$root&&e.$root.selectedTheme==="monokai"}])},[p("main",null,[ze(vf)]),s[0]||(s[0]=p("footer",null,[p("p",null,[rs("The foundational logic of this simulation was meticulously designed by "),p("a",{href:"https://x.com/cembingool",target:"_blank"},"Cem"),rs(", Head of Data at Juphy, and subsequently implemented in code by "),p("a",{href:"https://x.com/nicetr",target:"_blank"},"Erdi"),rs(", Head of Product at Juphy.")])],-1))],2))}},Vn=Gu(mf),_f=["default","hacker","terminal","amber","monokai"];Vn.config.globalProperties.selectedTheme="monokai";function yf(){document.documentElement.classList.remove("theme-hacker"),document.documentElement.classList.remove("theme-terminal"),document.documentElement.classList.remove("theme-amber"),document.documentElement.classList.remove("theme-monokai"),document.documentElement.classList.remove("light-mode"),document.documentElement.classList.remove("dark-mode")}const Qr=localStorage.getItem("selectedTheme");let xt="monokai";Qr&&_f.includes(Qr)?xt=Qr:localStorage.setItem("selectedTheme",xt);yf();Vn.config.globalProperties.selectedTheme=xt;xt==="hacker"?document.documentElement.classList.add("theme-hacker"):xt==="terminal"?document.documentElement.classList.add("theme-terminal"):xt==="amber"?document.documentElement.classList.add("theme-amber"):xt==="monokai"?document.documentElement.classList.add("theme-monokai"):xt==="default"&&document.documentElement.classList.add("light-mode");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{const e=localStorage.getItem("selectedTheme");(!e||e==="default")&&(t.matches?(document.documentElement.classList.add("dark-mode"),document.documentElement.classList.remove("light-mode")):(document.documentElement.classList.add("light-mode"),document.documentElement.classList.remove("dark-mode")))});Vn.mount("#app");export{bf as g};
